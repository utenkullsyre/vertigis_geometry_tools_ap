/*! For license information please see main.js.LICENSE.txt */
define(["@arcgis/core/geometry","@arcgis/core/geometry/support/jsonUtils","@arcgis/core/geometry/projection"],(function(t,e,r){return function(){var n,i,o={4:function(t){t.exports=function(){"use strict";function t(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var e=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function r(t,e){return t>e?1:t<e?-1:0}function n(t,r,n){for(var i=new e(null,null),o=i,s=i;;){var l=n(t,r.key);if(l<0){if(null===r.left)break;if(n(t,r.left.key)<0){var a=r.left;if(r.left=a.right,a.right=r,null===(r=a).left)break}s.left=r,s=r,r=r.left}else{if(!(l>0))break;if(null===r.right)break;if(n(t,r.right.key)>0&&(a=r.right,r.right=a.left,a.left=r,null===(r=a).right))break;o.right=r,o=r,r=r.right}}return o.right=r.left,s.left=r.right,r.left=i.right,r.right=i.left,r}function i(t,r,i,o){var s=new e(t,r);if(null===i)return s.left=s.right=null,s;var l=o(t,(i=n(t,i,o)).key);return l<0?(s.left=i.left,s.right=i,i.left=null):l>=0&&(s.right=i.right,s.left=i,i.right=null),s}function o(t,e,r){var i=null,o=null;if(e){var s=r((e=n(t,e,r)).key,t);0===s?(i=e.left,o=e.right):s<0?(o=e.right,e.right=null,i=e):(i=e.left,e.left=null,o=e)}return{left:i,right:o}}function s(t,e,r,n,i){if(t){n(e+(r?"└── ":"├── ")+i(t)+"\n");var o=e+(r?"    ":"│   ");t.left&&s(t.left,o,!1,n,i),t.right&&s(t.right,o,!0,n,i)}}var l=function(){function l(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}return l.prototype.insert=function(t,e){return this._size++,this._root=i(t,e,this._root,this._comparator)},l.prototype.add=function(t,r){var i=new e(t,r);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var o=this._comparator,s=n(t,this._root,o),l=o(t,s.key);return 0===l?this._root=s:(l<0?(i.left=s.left,i.right=s,s.left=null):l>0&&(i.right=s.right,i.left=s,s.right=null),this._size++,this._root=i),this._root},l.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},l.prototype._remove=function(t,e,r){var i;return null===e?null:0===r(t,(e=n(t,e,r)).key)?(null===e.left?i=e.right:(i=n(t,e.left,r)).right=e.right,this._size--,i):e},l.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=n(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},l.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},l.prototype.find=function(t){return this._root&&(this._root=n(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},l.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},l.prototype.forEach=function(t,e){for(var r=this._root,n=[],i=!1;!i;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),t.call(e,r),r=r.right):i=!0;return this},l.prototype.range=function(t,e,r,n){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this},l.prototype.keys=function(){var t=[];return this.forEach((function(e){var r=e.key;return t.push(r)})),t},l.prototype.values=function(){var t=[];return this.forEach((function(e){var r=e.data;return t.push(r)})),t},l.prototype.min=function(){return this._root?this.minNode(this._root).key:null},l.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},l.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},l.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},l.prototype.at=function(t){for(var e=this._root,r=!1,n=0,i=[];!r;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),n===t)return e;n++,e=e.right}else r=!0;return null},l.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?(r=e,e=e.left):e=e.right}return r},l.prototype.prev=function(t){var e=this._root,r=null;if(null!==t.left){for(r=t.left;r.right;)r=r.right;return r}for(var n=this._comparator;e;){var i=n(t.key,e.key);if(0===i)break;i<0?e=e.left:(r=e,e=e.right)}return r},l.prototype.clear=function(){return this._root=null,this._size=0,this},l.prototype.toList=function(){return function(t){for(var r=t,n=[],i=!1,o=new e(null,null),s=o;!i;)r?(n.push(r),r=r.left):n.length>0?r=(r=s=s.next=n.pop()).right:i=!0;return s.next=null,o.next}(this._root)},l.prototype.load=function(t,r,n){void 0===r&&(r=[]),void 0===n&&(n=!1);var i=t.length,o=this._comparator;if(n&&u(t,r,0,i-1,o),null===this._root)this._root=a(t,r,0,i),this._size=i;else{var s=function(t,r,n){for(var i=new e(null,null),o=i,s=t,l=r;null!==s&&null!==l;)n(s.key,l.key)<0?(o.next=s,s=s.next):(o.next=l,l=l.next),o=o.next;return null!==s?o.next=s:null!==l&&(o.next=l),i.next}(this.toList(),function(t,r){for(var n=new e(null,null),i=n,o=0;o<t.length;o++)i=i.next=new e(t[o],r[o]);return i.next=null,n.next}(t,r),o);i=this._size+i,this._root=h({head:s},0,i)}return this},l.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(l.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),l.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return s(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},l.prototype.update=function(t,e,r){var s=this._comparator,l=o(t,this._root,s),a=l.left,h=l.right;s(t,e)<0?h=i(e,r,h,s):a=i(e,r,a,s),this._root=function(t,e,r){return null===e?t:(null===t||((e=n(t.key,e,r)).left=t),e)}(a,h,s)},l.prototype.split=function(t){return o(t,this._root,this._comparator)},l.prototype[Symbol.iterator]=function(){var e,r,n;return t(this,(function(t){switch(t.label){case 0:e=this._root,r=[],n=!1,t.label=1;case 1:return n?[3,6]:null===e?[3,2]:(r.push(e),e=e.left,[3,5]);case 2:return 0===r.length?[3,4]:[4,e=r.pop()];case 3:return t.sent(),e=e.right,[3,5];case 4:n=!0,t.label=5;case 5:return[3,1];case 6:return[2]}}))},l}();function a(t,r,n,i){var o=i-n;if(o>0){var s=n+Math.floor(o/2),l=t[s],h=r[s],u=new e(l,h);return u.left=a(t,r,n,s),u.right=a(t,r,s+1,i),u}return null}function h(t,e,r){var n=r-e;if(n>0){var i=e+Math.floor(n/2),o=h(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=h(t,i+1,r),s}return null}function u(t,e,r,n,i){if(!(r>=n)){for(var o=t[r+n>>1],s=r-1,l=n+1;;){do{s++}while(i(t[s],o)<0);do{l--}while(i(t[l],o)>0);if(s>=l)break;var a=t[s];t[s]=t[l],t[l]=a,a=e[s],e[s]=e[l],e[l]=a}u(t,e,r,l,i),u(t,e,l+1,n,i)}}const c=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,p=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:r,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}};let f=Number.EPSILON;void 0===f&&(f=Math.pow(2,-52));const y=f*f,g=(t,e)=>{if(-f<t&&t<f&&-f<e&&e<f)return 0;const r=t-e;return r*r<y*t*e?0:t<e?-1:1};class d{constructor(){this.tree=new l,this.round(0)}round(t){const e=this.tree.add(t),r=this.tree.prev(e);if(null!==r&&0===g(e.key,r.key))return this.tree.remove(t),r.key;const n=this.tree.next(e);return null!==n&&0===g(e.key,n.key)?(this.tree.remove(t),n.key):t}}const m=new class{constructor(){this.reset()}reset(){this.xRounder=new d,this.yRounder=new d}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}},b=11102230246251565e-32,x=134217729,v=(3+8*b)*b;function _(t,e,r,n,i){let o,s,l,a,h=e[0],u=n[0],c=0,p=0;u>h==u>-h?(o=h,h=e[++c]):(o=u,u=n[++p]);let f=0;if(c<t&&p<r)for(u>h==u>-h?(s=h+o,l=o-(s-h),h=e[++c]):(s=u+o,l=o-(s-u),u=n[++p]),o=s,0!==l&&(i[f++]=l);c<t&&p<r;)u>h==u>-h?(s=o+h,a=s-o,l=o-(s-a)+(h-a),h=e[++c]):(s=o+u,a=s-o,l=o-(s-a)+(u-a),u=n[++p]),o=s,0!==l&&(i[f++]=l);for(;c<t;)s=o+h,a=s-o,l=o-(s-a)+(h-a),h=e[++c],o=s,0!==l&&(i[f++]=l);for(;p<r;)s=o+u,a=s-o,l=o-(s-a)+(u-a),u=n[++p],o=s,0!==l&&(i[f++]=l);return 0===o&&0!==f||(i[f++]=o),f}function S(t){return new Float64Array(t)}const E=S(4),k=S(8),w=S(12),P=S(16),I=S(4);function O(t,e,r,n,i,o){const s=(e-o)*(r-i),l=(t-i)*(n-o),a=s-l,h=Math.abs(s+l);return Math.abs(a)>=33306690738754716e-32*h?a:-function(t,e,r,n,i,o,s){let l,a,h,u,c,p,f,y,g,d,m,b,S,O,N,R,L,$;const M=t-i,T=r-i,A=e-o,G=n-o;O=M*G,p=x*M,f=p-(p-M),y=M-f,p=x*G,g=p-(p-G),d=G-g,N=y*d-(O-f*g-y*g-f*d),R=A*T,p=x*A,f=p-(p-A),y=A-f,p=x*T,g=p-(p-T),d=T-g,L=y*d-(R-f*g-y*g-f*d),m=N-L,c=N-m,E[0]=N-(m+c)+(c-L),b=O+m,c=b-O,S=O-(b-c)+(m-c),m=S-R,c=S-m,E[1]=S-(m+c)+(c-R),$=b+m,c=$-b,E[2]=b-($-c)+(m-c),E[3]=$;let z=function(t,e){let r=e[0];for(let n=1;n<t;n++)r+=e[n];return r}(4,E),C=22204460492503146e-32*s;if(z>=C||-z>=C)return z;if(c=t-M,l=t-(M+c)+(c-i),c=r-T,h=r-(T+c)+(c-i),c=e-A,a=e-(A+c)+(c-o),c=n-G,u=n-(G+c)+(c-o),0===l&&0===a&&0===h&&0===u)return z;if(C=11093356479670487e-47*s+v*Math.abs(z),z+=M*u+G*l-(A*h+T*a),z>=C||-z>=C)return z;O=l*G,p=x*l,f=p-(p-l),y=l-f,p=x*G,g=p-(p-G),d=G-g,N=y*d-(O-f*g-y*g-f*d),R=a*T,p=x*a,f=p-(p-a),y=a-f,p=x*T,g=p-(p-T),d=T-g,L=y*d-(R-f*g-y*g-f*d),m=N-L,c=N-m,I[0]=N-(m+c)+(c-L),b=O+m,c=b-O,S=O-(b-c)+(m-c),m=S-R,c=S-m,I[1]=S-(m+c)+(c-R),$=b+m,c=$-b,I[2]=b-($-c)+(m-c),I[3]=$;const j=_(4,E,4,I,k);O=M*u,p=x*M,f=p-(p-M),y=M-f,p=x*u,g=p-(p-u),d=u-g,N=y*d-(O-f*g-y*g-f*d),R=A*h,p=x*A,f=p-(p-A),y=A-f,p=x*h,g=p-(p-h),d=h-g,L=y*d-(R-f*g-y*g-f*d),m=N-L,c=N-m,I[0]=N-(m+c)+(c-L),b=O+m,c=b-O,S=O-(b-c)+(m-c),m=S-R,c=S-m,I[1]=S-(m+c)+(c-R),$=b+m,c=$-b,I[2]=b-($-c)+(m-c),I[3]=$;const J=_(j,k,4,I,w);O=l*u,p=x*l,f=p-(p-l),y=l-f,p=x*u,g=p-(p-u),d=u-g,N=y*d-(O-f*g-y*g-f*d),R=a*h,p=x*a,f=p-(p-a),y=a-f,p=x*h,g=p-(p-h),d=h-g,L=y*d-(R-f*g-y*g-f*d),m=N-L,c=N-m,I[0]=N-(m+c)+(c-L),b=O+m,c=b-O,S=O-(b-c)+(m-c),m=S-R,c=S-m,I[1]=S-(m+c)+(c-R),$=b+m,c=$-b,I[2]=b-($-c)+(m-c),I[3]=$;const F=_(J,w,4,I,P);return P[F-1]}(t,e,r,n,i,o,h)}const N=(t,e)=>t.x*e.y-t.y*e.x,R=(t,e)=>t.x*e.x+t.y*e.y,L=(t,e,r)=>{const n=O(t.x,t.y,e.x,e.y,r.x,r.y);return n>0?-1:n<0?1:0},$=t=>Math.sqrt(R(t,t)),M=(t,e,r)=>{const n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return N(i,n)/$(i)/$(n)},T=(t,e,r)=>{const n={x:e.x-t.x,y:e.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return R(i,n)/$(i)/$(n)},A=(t,e,r)=>0===e.y?null:{x:t.x+e.x/e.y*(r-t.y),y:r},G=(t,e,r)=>0===e.x?null:{x:r,y:t.y+e.y/e.x*(r-t.x)};class z{static compare(t,e){const r=z.comparePoints(t.point,e.point);return 0!==r?r:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:j.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const e=t.point.events;for(let t=0,r=e.length;t<r;t++){const r=e[t];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let e=0;e<t;e++){const r=this.point.events[e];if(void 0===r.segment.consumedBy)for(let n=e+1;n<t;n++){const t=this.point.events[n];void 0===t.consumedBy&&r.otherSE.point.events===t.otherSE.point.events&&r.segment.consume(t.segment)}}}getAvailableLinkedEvents(){const t=[];for(let e=0,r=this.point.events.length;e<r;e++){const r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}getLeftmostComparator(t){const e=new Map,r=r=>{const n=r.otherSE;e.set(r,{sine:M(this.point,t.point,n.point),cosine:T(this.point,t.point,n.point)})};return(t,n)=>{e.has(t)||r(t),e.has(n)||r(n);const{sine:i,cosine:o}=e.get(t),{sine:s,cosine:l}=e.get(n);return i>=0&&s>=0?o<l?1:o>l?-1:0:i<0&&s<0?o<l?-1:o>l?1:0:s<i?-1:s>i?1:0}}}let C=0;class j{static compare(t,e){const r=t.leftSE.point.x,n=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<r)return 1;if(i<n)return-1;const s=t.leftSE.point.y,l=e.leftSE.point.y,a=t.rightSE.point.y,h=e.rightSE.point.y;if(r<n){if(l<s&&l<a)return 1;if(l>s&&l>a)return-1;const r=t.comparePoint(e.leftSE.point);if(r<0)return 1;if(r>0)return-1;const n=e.comparePoint(t.rightSE.point);return 0!==n?n:-1}if(r>n){if(s<l&&s<h)return-1;if(s>l&&s>h)return 1;const r=e.comparePoint(t.leftSE.point);if(0!==r)return r;const n=t.comparePoint(e.rightSE.point);return n<0?1:n>0?-1:1}if(s<l)return-1;if(s>l)return 1;if(i<o){const r=e.comparePoint(t.rightSE.point);if(0!==r)return r}if(i>o){const r=t.comparePoint(e.rightSE.point);if(r<0)return 1;if(r>0)return-1}if(i!==o){const t=a-s,e=i-r,u=h-l,c=o-n;if(t>e&&u<c)return 1;if(t<e&&u>c)return-1}return i>o?1:i<o||a<h?-1:a>h?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,r,n){this.id=++C,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=r,this.windings=n}static fromRing(t,e,r){let n,i,o;const s=z.comparePoints(t,e);if(s<0)n=t,i=e,o=1;else{if(!(s>0))throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);n=e,i=t,o=-1}const l=new z(n,!0),a=new z(i,!1);return new j(l,a,[r],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const e=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(e.x===r.x)return t.x===e.x?0:t.x<e.x?1:-1;const i=(t.y-e.y)/n.y,o=e.x+i*n.x;if(t.x===o)return 0;const s=(t.x-e.x)/n.x,l=e.y+s*n.y;return t.y===l?0:t.y<l?-1:1}getIntersection(t){const e=this.bbox(),r=t.bbox(),n=p(e,r);if(null===n)return null;const i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,l=t.rightSE.point,a=c(e,s)&&0===this.comparePoint(s),h=c(r,i)&&0===t.comparePoint(i),u=c(e,l)&&0===this.comparePoint(l),f=c(r,o)&&0===t.comparePoint(o);if(h&&a)return f&&!u?o:!f&&u?l:null;if(h)return u&&i.x===l.x&&i.y===l.y?null:i;if(a)return f&&o.x===s.x&&o.y===s.y?null:s;if(f&&u)return null;if(f)return o;if(u)return l;const y=((t,e,r,n)=>{if(0===e.x)return G(r,n,t.x);if(0===n.x)return G(t,e,r.x);if(0===e.y)return A(r,n,t.y);if(0===n.y)return A(t,e,r.y);const i=N(e,n);if(0==i)return null;const o={x:r.x-t.x,y:r.y-t.y},s=N(o,e)/i,l=N(o,n)/i;return{x:(t.x+l*e.x+(r.x+s*n.x))/2,y:(t.y+l*e.y+(r.y+s*n.y))/2}})(i,this.vector(),s,t.vector());return null===y?null:c(n,y)?m.round(y.x,y.y):null}split(t){const e=[],r=void 0!==t.events,n=new z(t,!0),i=new z(t,!1),o=this.rightSE;this.replaceRightSE(i),e.push(i),e.push(n);const s=new j(n,o,this.rings.slice(),this.windings.slice());return z.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),z.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(n.checkForConsuming(),i.checkForConsuming()),e}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,e=this.windings.length;t<e;t++)this.windings[t]*=-1}consume(t){let e=this,r=t;for(;e.consumedBy;)e=e.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const n=j.compare(e,r);if(0!==n){if(n>0){const t=e;e=r,r=t}if(e.prev===r){const t=e;e=r,r=t}for(let t=0,n=r.rings.length;t<n;t++){const n=r.rings[t],i=r.windings[t],o=e.rings.indexOf(n);-1===o?(e.rings.push(n),e.windings.push(i)):e.windings[o]+=i}r.rings=null,r.windings=null,r.consumedBy=e,r.leftSE.consumedBy=e.leftSE,r.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const e=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys;for(let t=0,n=this.rings.length;t<n;t++){const n=this.rings[t],i=this.windings[t],o=e.indexOf(n);-1===o?(e.push(n),r.push(i)):r[o]+=i}const i=[],o=[];for(let t=0,n=e.length;t<n;t++){if(0===r[t])continue;const n=e[t],s=n.poly;if(-1===o.indexOf(s))if(n.isExterior)i.push(s);else{-1===o.indexOf(s)&&o.push(s);const t=i.indexOf(n.poly);-1!==t&&i.splice(t,1)}}for(let t=0,e=i.length;t<e;t++){const e=i[t].multiPoly;-1===n.indexOf(e)&&n.push(e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;const t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(K.type){case"union":{const r=0===t.length,n=0===e.length;this._isInResult=r!==n;break}case"intersection":{let r,n;t.length<e.length?(r=t.length,n=e.length):(r=e.length,n=t.length),this._isInResult=n===K.numMultiPolys&&r<n;break}case"xor":{const r=Math.abs(t.length-e.length);this._isInResult=r%2==1;break}case"difference":{const r=t=>1===t.length&&t[0].isSubject;this._isInResult=r(t)!==r(e);break}default:throw new Error(`Unrecognized operation type found ${K.type}`)}return this._isInResult}}class J{constructor(t,e,r){if(!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=r,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const n=m.round(t[0][0],t[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};let i=n;for(let e=1,r=t.length;e<r;e++){if("number"!=typeof t[e][0]||"number"!=typeof t[e][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let r=m.round(t[e][0],t[e][1]);r.x===i.x&&r.y===i.y||(this.segments.push(j.fromRing(i,r,this)),r.x<this.bbox.ll.x&&(this.bbox.ll.x=r.x),r.y<this.bbox.ll.y&&(this.bbox.ll.y=r.y),r.x>this.bbox.ur.x&&(this.bbox.ur.x=r.x),r.y>this.bbox.ur.y&&(this.bbox.ur.y=r.y),i=r)}n.x===i.x&&n.y===i.y||this.segments.push(j.fromRing(i,n,this))}getSweepEvents(){const t=[];for(let e=0,r=this.segments.length;e<r;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}class F{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new J(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let e=1,r=t.length;e<r;e++){const r=new J(t[e],this,!1);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,r=this.interiorRings.length;e<r;e++){const r=this.interiorRings[e].getSweepEvents();for(let e=0,n=r.length;e<n;e++)t.push(r[e])}return t}}class B{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let e=0,r=t.length;e<r;e++){const r=new F(t[e],this);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,r=this.polys.length;e<r;e++){const r=this.polys[e].getSweepEvents();for(let e=0,n=r.length;e<n;e++)t.push(r[e])}return t}}class U{static factory(t){const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(!n.isInResult()||n.ringOut)continue;let i=null,o=n.leftSE,s=n.rightSE;const l=[o],a=o.point,h=[];for(;i=o,o=s,l.push(o),o.point!==a;)for(;;){const t=o.getAvailableLinkedEvents();if(0===t.length){const t=l[0].point,e=l[l.length-1].point;throw new Error(`Unable to complete output ring starting at [${t.x}, ${t.y}]. Last matching segment found ends at [${e.x}, ${e.y}].`)}if(1===t.length){s=t[0].otherSE;break}let r=null;for(let t=0,e=h.length;t<e;t++)if(h[t].point===o.point){r=t;break}if(null!==r){const t=h.splice(r)[0],n=l.splice(t.index);n.unshift(n[0].otherSE),e.push(new U(n.reverse()));continue}h.push({index:l.length,point:o.point});const n=o.getLeftmostComparator(i);s=t.sort(n)[0].otherSE;break}e.push(new U(l))}return e}constructor(t){this.events=t;for(let e=0,r=t.length;e<r;e++)t[e].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const e=[t];for(let r=1,n=this.events.length-1;r<n;r++){const n=this.events[r].point,i=this.events[r+1].point;0!==L(n,t,i)&&(e.push(n),t=n)}if(1===e.length)return null;const r=e[0],n=e[1];0===L(r,t,n)&&e.shift(),e.push(e[0]);const i=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,l=[];for(let t=o;t!=s;t+=i)l.push([e[t].x,e[t].y]);return l}isExteriorRing(){if(void 0===this._isExteriorRing){const t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let e=1,r=this.events.length;e<r;e++){const r=this.events[e];z.compare(t,r)>0&&(t=r)}let e=t.segment.prevInResult(),r=e?e.prevInResult():null;for(;;){if(!e)return null;if(!r)return e.ringOut;if(r.ringOut!==e.ringOut)return r.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing();e=r.prevInResult(),r=e?e.prevInResult():null}}}class Y{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(let e=0,r=this.interiorRings.length;e<r;e++){const r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}class q{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,r=this.polys.length;e<r;e++){const r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}_composePolys(t){const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(!n.poly)if(n.isExteriorRing())e.push(new Y(n));else{const t=n.enclosingRing();t.poly||e.push(new Y(t)),t.poly.addInterior(n)}}return e}}class D{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.compare;this.queue=t,this.tree=new l(e),this.segments=[]}process(t){const e=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),r;const n=t.isLeft?this.tree.add(e):this.tree.find(e);if(!n)throw new Error(`Unable to find segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] in SweepLine tree.`);let i,o,s=n,l=n;for(;void 0===i;)s=this.tree.prev(s),null===s?i=null:void 0===s.key.consumedBy&&(i=s.key);for(;void 0===o;)l=this.tree.next(l),null===l?o=null:void 0===l.key.consumedBy&&(o=l.key);if(t.isLeft){let n=null;if(i){const t=i.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(n=t),!i.isAnEndpoint(t))){const e=this._splitSafely(i,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}let s=null;if(o){const t=o.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(s=t),!o.isAnEndpoint(t))){const e=this._splitSafely(o,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}if(null!==n||null!==s){let t=null;t=null===n?s:null===s||z.comparePoints(n,s)<=0?n:s,this.queue.remove(e.rightSE),r.push(e.rightSE);const i=e.split(t);for(let t=0,e=i.length;t<e;t++)r.push(i[t])}r.length>0?(this.tree.remove(e),r.push(t)):(this.segments.push(e),e.prev=i)}else{if(i&&o){const t=i.getIntersection(o);if(null!==t){if(!i.isAnEndpoint(t)){const e=this._splitSafely(i,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}if(!o.isAnEndpoint(t)){const e=this._splitSafely(o,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}}this.tree.remove(e)}return r}_splitSafely(t,e){this.tree.remove(t);const r=t.rightSE;this.queue.remove(r);const n=t.split(e);return n.push(r),void 0===t.consumedBy&&this.tree.add(t),n}}const Z="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,V="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;const K=new class{run(t,e,r){K.type=t,m.reset();const n=[new B(e,!0)];for(let t=0,e=r.length;t<e;t++)n.push(new B(r[t],!1));if(K.numMultiPolys=n.length,"difference"===K.type){const t=n[0];let e=1;for(;e<n.length;)null!==p(n[e].bbox,t.bbox)?e++:n.splice(e,1)}if("intersection"===K.type)for(let t=0,e=n.length;t<e;t++){const e=n[t];for(let r=t+1,i=n.length;r<i;r++)if(null===p(e.bbox,n[r].bbox))return[]}const i=new l(z.compare);for(let t=0,e=n.length;t<e;t++){const e=n[t].getSweepEvents();for(let t=0,r=e.length;t<r;t++)if(i.insert(e[t]),i.size>Z)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new D(i);let s=i.size,a=i.pop();for(;a;){const t=a.key;if(i.size===s){const e=t.segment;throw new Error(`Unable to pop() ${t.isLeft?"left":"right"} SweepEvent [${t.point.x}, ${t.point.y}] from segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] from queue.`)}if(i.size>Z)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>V)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const e=o.process(t);for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0===r.consumedBy&&i.insert(r)}s=i.size,a=i.pop()}m.reset();const h=U.factory(o.segments);return new q(h).getGeom()}};return{union:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return K.run("union",t,r)},intersection:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return K.run("intersection",t,r)},xor:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return K.run("xor",t,r)},difference:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return K.run("difference",t,r)}}}()},590:function(e){"use strict";e.exports=t},414:function(t){"use strict";t.exports=r},770:function(t){"use strict";t.exports=e}},s={};function l(t){var e=s[t];if(void 0!==e)return e.exports;var r=s[t]={exports:{}};return o[t].call(r.exports,r,r.exports,l),r.exports}i=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},l.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var r=Object.create(null);l.r(r);var o={};n=n||[null,i({}),i([]),i(i)];for(var s=2&e&&t;"object"==typeof s&&!~n.indexOf(s);s=i(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return t[e]}}));return o.default=function(){return t},l.d(r,o),r},l.d=function(t,e){for(var r in e)l.o(e,r)&&!l.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return function(){"use strict";l.r(a),l.d(a,{main:function(){return Q}});var t={};l.r(t),l.d(t,{DissolveActivity:function(){return x},Vegsysref_kartActivity:function(){return K}});var e=function(t,e,r,n){var i=(n[0]-r[0])*(t[1]-r[1])-(n[1]-r[1])*(t[0]-r[0]),o=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]),s=(n[1]-r[1])*(e[0]-t[0])-(n[0]-r[0])*(e[1]-t[1]);if(0!==s){var l=i/s,a=o/s;if(l>=0&&l<=1&&a>=0&&a<=1)return!0}return!1},r=function(t,r){for(var n=0;n<t.length-1;n++)for(var i=0;i<r.length-1;i++)if(e(t[n],t[n+1],r[i],r[i+1]))return!0;return!1},n=function(t){return function(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t},i=function(t){for(var e,r=0,n=0,i=t.length,o=t[n];n<i-1;n++)r+=((e=t[n+1])[0]-o[0])*(e[1]+o[1]),o=e;return r>=0},o=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},s=function(t,e){var n=r(t,e),i=function(t,e){for(var r=!1,n=-1,i=t.length,o=i-1;++n<i;o=n)(t[n][1]<=e[1]&&e[1]<t[o][1]||t[o][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[o][0]-t[n][0])*(e[1]-t[n][1])/(t[o][1]-t[n][1])+t[n][0]&&(r=!r);return r}(t,e[0]);return!(n||!i)},h=function t(e,l){var a={};if(e.features){a.type="FeatureCollection",a.features=[];for(var h=0;h<e.features.length;h++)a.features.push(t(e.features[h],l))}if("number"==typeof e.x&&"number"==typeof e.y&&(a.type="Point",a.coordinates=[e.x,e.y],"number"==typeof e.z&&a.coordinates.push(e.z)),e.points&&(a.type="MultiPoint",a.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(a.type="LineString",a.coordinates=e.paths[0].slice(0)):(a.type="MultiLineString",a.coordinates=e.paths.slice(0))),e.rings&&(a=function(t){for(var e,o,l,a=[],h=[],u=0;u<t.length;u++){var c=n(t[u].slice(0));if(!(c.length<4))if(i(c)){var p=[c.slice().reverse()];a.push(p)}else h.push(c.slice().reverse())}for(var f=[];h.length;){l=h.pop();var y=!1;for(e=a.length-1;e>=0;e--)if(o=a[e][0],s(o,l)){a[e].push(l),y=!0;break}y||f.push(l)}for(;f.length;){l=f.pop();var g=!1;for(e=a.length-1;e>=0;e--)if(o=a[e][0],r(o,l)){a[e].push(l),g=!0;break}g||a.push([l.reverse()])}return 1===a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(a.type="Polygon",a.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(a.type="Feature",a.geometry=e.geometry?t(e.geometry):null,a.properties=e.attributes?o(e.attributes):null,e.attributes))try{a.id=function(t,e){for(var r=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<r.length;n++){var i=r[n];if(i in t&&("string"==typeof t[i]||"number"==typeof t[i]))return t[i]}throw Error("No valid id attribute found")}(e.attributes,l)}catch(t){}return JSON.stringify(a.geometry)===JSON.stringify({})&&(a.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),a},u=function(t){var e=[],r=t.slice(0),o=n(r.shift().slice(0));if(o.length>=4){i(o)||o.reverse(),e.push(o);for(var s=0;s<r.length;s++){var l=n(r[s].slice(0));l.length>=4&&(i(l)&&l.reverse(),e.push(l))}}return e},c=function t(e,r){r=r||"OBJECTID";var n,i={wkid:4326},s={};switch(e.type){case"Point":s.x=e.coordinates[0],s.y=e.coordinates[1],null!=e.coordinates[2]&&(s.z=e.coordinates[2]),s.spatialReference=i;break;case"MultiPoint":s.points=e.coordinates.slice(0),null!=e.coordinates[0][2]&&(s.hasZ=!0),s.spatialReference=i;break;case"LineString":s.paths=[e.coordinates.slice(0)],null!=e.coordinates[0][2]&&(s.hasZ=!0),s.spatialReference=i;break;case"MultiLineString":s.paths=e.coordinates.slice(0),null!=e.coordinates[0][0][2]&&(s.hasZ=!0),s.spatialReference=i;break;case"Polygon":s.rings=u(e.coordinates.slice(0)),null!=e.coordinates[0][0][2]&&(s.hasZ=!0),s.spatialReference=i;break;case"MultiPolygon":s.rings=function(t){for(var e=[],r=0;r<t.length;r++)for(var n=u(t[r]),i=n.length-1;i>=0;i--){var o=n[i].slice(0);e.push(o)}return e}(e.coordinates.slice(0)),null!=e.coordinates[0][0][0][2]&&(s.hasZ=!0),s.spatialReference=i;break;case"Feature":e.geometry&&(s.geometry=t(e.geometry,r)),s.attributes=e.properties?o(e.properties):{},e.id&&(s.attributes[r]=e.id);break;case"FeatureCollection":for(s=[],n=0;n<e.features.length;n++)s.push(t(e.features[n],r));break;case"GeometryCollection":for(s=[],n=0;n<e.geometries.length;n++)s.push(t(e.geometries[n],r))}return s};function p(t,e,r={}){const n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function f(t,e={}){const r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function y(t,e,r={}){return p({type:"MultiPolygon",coordinates:t},e,r)}function g(t,e){!function(t,e){var r,n,i,o,s,l,a,h,u,c,p=0,f="FeatureCollection"===t.type,y="Feature"===t.type,g=f?t.features.length:1;for(r=0;r<g;r++){for(l=f?t.features[r].geometry:y?t.geometry:t,h=f?t.features[r].properties:y?t.properties:{},u=f?t.features[r].bbox:y?t.bbox:void 0,c=f?t.features[r].id:y?t.id:void 0,s=(a=!!l&&"GeometryCollection"===l.type)?l.geometries.length:1,i=0;i<s;i++)if(null!==(o=a?l.geometries[i]:l))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,h,u,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],p,h,u,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,h,u,c))return!1;p++}}(t,(function(t,r,n,i,o){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(p(t,n,{bbox:i,id:o}),r,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var a=0;a<t.coordinates.length;a++){var h=t.coordinates[a];if(!1===e(p({type:s,coordinates:h},n),r,a))return!1}}))}function d(t){if(!t)throw new Error("geojson is required");var e=[];return g(t,(function(t){e.push(t)})),f(e)}Math.PI;var m=l(4);class b{async execute(t){const[e,r]=await Promise.all([Promise.resolve().then(l.t.bind(l,414,23)),Promise.resolve().then(l.t.bind(l,770,23))]);await e.load(),console.log(t.geometri);let n="";n=void 0!==t.geometri?"geometri":void 0!==t.features?"features":"none";let i=0,o={},s=[];switch(n){case"geometri":i=t.geometri[0].spatialReference.wkid,s=t.geometri.map((t=>{const r=e.project(t,{wkid:4326});return p(h(r.toJSON()))}));break;case"features":i=t.features[0].geometry.spatialReference.wkid,s=function(t){const r=t.map((t=>{const r=e.project(t.geometry,{wkid:4326});return t.geometry=r,h(t.toJSON())}));return r}(t.features);break;default:i=0}const a={};if("Polygon"===s[0].geometry.type){const t=function(t,e={}){if(null===(r=e=e||{})||"object"!=typeof r||Array.isArray(r))throw new Error("options is invalid");var r;const{propertyName:n}=e;!function(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(const n of t.features){if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+n.geometry.type)}}(t,"Polygon","dissolve");const i=[];if(!n)return d(y(m.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));{const e={};!function(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}(t,(function(t){t.properties&&(Object.prototype.hasOwnProperty.call(e,t.properties[n])||(e[t.properties[n]]=[]),e[t.properties[n]].push(t))}));const r=Object.keys(e);for(let t=0;t<r.length;t++){const o=y(m.union.apply(null,e[r[t]].map((function(t){return t.geometry.coordinates}))));o&&o.properties&&(o.properties[n]=r[t],i.push(o))}}return d(f(i))}(f(s),a),n=c(t);Array.isArray(n)&&n.length>1&&n.map((t=>r.fromJSON(t.geometry)));const l=n.map((t=>{const n=r.fromJSON(t.geometry);return e.project(n,{wkid:i})}));console.log(l),o={error:!1,flater:l}}else o={error:!0,message:"Input geometry must be a polygon"};return{result:o}}}b.suite="uuid:f250d4a7-a6e0-4742-ae57-7af5b86dc555",b.action="uuid:f250d4a7-a6e0-4742-ae57-7af5b86dc555::DissolveActivity";var x=b,v=l(590),_=function(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r},S=[1,9],E=[1,10],k=[1,11],w=[1,12],P=[1,13],I=[1,14],O=[1,15],N=[1,60],R=[5,15,19],L=[1,67],$=[1,73],M=[1,87],T=[1,104],A=[15,19],G=[1,110],z=[1,116],C=[1,130],j=[1,136],J={trace:function(){},yy:{},symbols_:{error:2,expressions:3,point:4,EOF:5,linestring:6,polygon:7,multipoint:8,multilinestring:9,multipolygon:10,geometrycollection:11,coordinate:12,DOUBLE_TOK:13,ptarray:14,COMMA:15,ring_list:16,ring:17,"(":18,")":19,POINT:20,Z:21,ZM:22,M:23,EMPTY:24,point_untagged:25,polygon_list:26,polygon_untagged:27,point_list:28,LINESTRING:29,POLYGON:30,MULTIPOINT:31,MULTILINESTRING:32,MULTIPOLYGON:33,geometry:34,geometry_collection:35,GEOMETRYCOLLECTION:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"DOUBLE_TOK",15:"COMMA",18:"(",19:")",20:"POINT",21:"Z",22:"ZM",23:"M",24:"EMPTY",29:"LINESTRING",30:"POLYGON",31:"MULTIPOINT",32:"MULTILINESTRING",33:"MULTIPOLYGON",36:"GEOMETRYCOLLECTION"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[12,2],[12,3],[12,4],[14,3],[14,1],[16,3],[16,1],[17,3],[4,4],[4,5],[4,5],[4,5],[4,2],[25,1],[25,3],[26,3],[26,1],[27,3],[28,3],[28,1],[6,4],[6,5],[6,5],[6,5],[6,2],[7,4],[7,5],[7,5],[7,5],[7,2],[8,4],[8,5],[8,5],[8,5],[8,2],[9,4],[9,5],[9,5],[9,5],[9,2],[10,4],[10,5],[10,5],[10,5],[10,2],[34,1],[34,1],[34,1],[34,1],[34,1],[34,1],[34,1],[35,3],[35,1],[11,4],[11,5],[11,5],[11,5],[11,2]],performAction:function(t,e,r,n,i,o,s){var l=o.length-1;switch(i){case 1:case 2:case 3:case 4:case 5:case 6:case 7:return o[l-1];case 8:this.$=new U([Number(o[l-1]),Number(o[l])]);break;case 9:this.$=new U([Number(o[l-2]),Number(o[l-1]),Number(o[l])]);break;case 10:this.$=new U([Number(o[l-3]),Number(o[l-2]),Number(o[l-1]),Number(o[l])]);break;case 11:case 26:this.$=o[l-2].addPoint(o[l]);break;case 12:case 21:case 27:case 53:case 54:case 55:case 56:case 57:case 58:case 59:this.$=o[l];break;case 13:this.$=o[l-2].addRing(o[l]);break;case 14:this.$=new q(o[l]);break;case 15:this.$=new Y(o[l-1]);break;case 16:this.$={type:"Point",coordinates:o[l-1].data[0]};break;case 17:this.$={type:"Point",coordinates:o[l-1].data[0],properties:{z:!0}};break;case 18:this.$={type:"Point",coordinates:o[l-1].data[0],properties:{z:!0,m:!0}};break;case 19:this.$={type:"Point",coordinates:o[l-1].data[0],properties:{m:!0}};break;case 20:this.$={type:"Point",coordinates:[]};break;case 22:case 25:this.$=o[l-1];break;case 23:this.$=o[l-2].addPolygon(o[l]);break;case 24:this.$=new Z(o[l]);break;case 28:this.$={type:"LineString",coordinates:o[l-1].data};break;case 29:this.$={type:"LineString",coordinates:o[l-1].data,properties:{z:!0}};break;case 30:this.$={type:"LineString",coordinates:o[l-1].data,properties:{m:!0}};break;case 31:this.$={type:"LineString",coordinates:o[l-1].data,properties:{z:!0,m:!0}};break;case 32:this.$={type:"LineString",coordinates:[]};break;case 33:this.$={type:"Polygon",coordinates:o[l-1].toJSON()};break;case 34:this.$={type:"Polygon",coordinates:o[l-1].toJSON(),properties:{z:!0}};break;case 35:this.$={type:"Polygon",coordinates:o[l-1].toJSON(),properties:{m:!0}};break;case 36:this.$={type:"Polygon",coordinates:o[l-1].toJSON(),properties:{z:!0,m:!0}};break;case 37:this.$={type:"Polygon",coordinates:[]};break;case 38:this.$={type:"MultiPoint",coordinates:o[l-1].data};break;case 39:this.$={type:"MultiPoint",coordinates:o[l-1].data,properties:{z:!0}};break;case 40:this.$={type:"MultiPoint",coordinates:o[l-1].data,properties:{m:!0}};break;case 41:this.$={type:"MultiPoint",coordinates:o[l-1].data,properties:{z:!0,m:!0}};break;case 42:this.$={type:"MultiPoint",coordinates:[]};break;case 43:this.$={type:"MultiLineString",coordinates:o[l-1].toJSON()};break;case 44:this.$={type:"MultiLineString",coordinates:o[l-1].toJSON(),properties:{z:!0}};break;case 45:this.$={type:"MultiLineString",coordinates:o[l-1].toJSON(),properties:{m:!0}};break;case 46:this.$={type:"MultiLineString",coordinates:o[l-1].toJSON(),properties:{z:!0,m:!0}};break;case 47:this.$={type:"MultiLineString",coordinates:[]};break;case 48:this.$={type:"MultiPolygon",coordinates:o[l-1].toJSON()};break;case 49:this.$={type:"MultiPolygon",coordinates:o[l-1].toJSON(),properties:{z:!0}};break;case 50:this.$={type:"MultiPolygon",coordinates:o[l-1].toJSON(),properties:{m:!0}};break;case 51:this.$={type:"MultiPolygon",coordinates:o[l-1].toJSON(),properties:{z:!0,m:!0}};break;case 52:this.$={type:"MultiPolygon",coordinates:[]};break;case 60:this.$=o[l-2].addGeometry(o[l]);break;case 61:this.$=new D(o[l]);break;case 62:this.$={type:"GeometryCollection",geometries:o[l-1].toJSON()};break;case 63:this.$={type:"GeometryCollection",geometries:o[l-1].toJSON(),properties:{z:!0}};break;case 64:this.$={type:"GeometryCollection",geometries:o[l-1].toJSON(),properties:{m:!0}};break;case 65:this.$={type:"GeometryCollection",geometries:o[l-1].toJSON(),properties:{z:!0,m:!0}};break;case 66:this.$={type:"GeometryCollection",geometries:[]}}},table:[{3:1,4:2,6:3,7:4,8:5,9:6,10:7,11:8,20:S,29:E,30:k,31:w,32:P,33:I,36:O},{1:[3]},{5:[1,16]},{5:[1,17]},{5:[1,18]},{5:[1,19]},{5:[1,20]},{5:[1,21]},{5:[1,22]},{18:[1,23],21:[1,24],22:[1,25],23:[1,26],24:[1,27]},{18:[1,28],21:[1,29],22:[1,31],23:[1,30],24:[1,32]},{18:[1,33],21:[1,34],22:[1,36],23:[1,35],24:[1,37]},{18:[1,38],21:[1,39],22:[1,41],23:[1,40],24:[1,42]},{18:[1,43],21:[1,44],22:[1,46],23:[1,45],24:[1,47]},{18:[1,48],21:[1,49],22:[1,51],23:[1,50],24:[1,52]},{18:[1,53],21:[1,54],22:[1,56],23:[1,55],24:[1,57]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{1:[2,7]},{12:59,13:N,14:58},{18:[1,61]},{18:[1,62]},{18:[1,63]},_(R,[2,20]),{12:66,13:N,18:L,25:65,28:64},{18:[1,68]},{18:[1,69]},{18:[1,70]},_(R,[2,32]),{16:71,17:72,18:$},{18:[1,74]},{18:[1,75]},{18:[1,76]},_(R,[2,37]),{12:66,13:N,18:L,25:65,28:77},{18:[1,78]},{18:[1,79]},{18:[1,80]},_(R,[2,42]),{16:81,17:72,18:$},{18:[1,82]},{18:[1,83]},{18:[1,84]},_(R,[2,47]),{18:M,26:85,27:86},{18:[1,88]},{18:[1,89]},{18:[1,90]},_(R,[2,52]),{4:93,6:94,7:95,8:96,9:97,10:98,11:99,20:S,29:E,30:k,31:w,32:P,33:I,34:92,35:91,36:O},{18:[1,100]},{18:[1,101]},{18:[1,102]},_(R,[2,66]),{15:T,19:[1,103]},_(A,[2,12]),{13:[1,105]},{12:59,13:N,14:106},{12:59,13:N,14:107},{12:59,13:N,14:108},{15:G,19:[1,109]},_(A,[2,27]),_(A,[2,21]),{12:111,13:N},{12:66,13:N,18:L,25:65,28:112},{12:66,13:N,18:L,25:65,28:113},{12:66,13:N,18:L,25:65,28:114},{15:z,19:[1,115]},_(A,[2,14]),{12:59,13:N,14:117},{16:118,17:72,18:$},{16:119,17:72,18:$},{16:120,17:72,18:$},{15:G,19:[1,121]},{12:66,13:N,18:L,25:65,28:122},{12:66,13:N,18:L,25:65,28:123},{12:66,13:N,18:L,25:65,28:124},{15:z,19:[1,125]},{16:126,17:72,18:$},{16:127,17:72,18:$},{16:128,17:72,18:$},{15:C,19:[1,129]},_(A,[2,24]),{16:131,17:72,18:$},{18:M,26:132,27:86},{18:M,26:133,27:86},{18:M,26:134,27:86},{15:j,19:[1,135]},_(A,[2,61]),_(A,[2,53]),_(A,[2,54]),_(A,[2,55]),_(A,[2,56]),_(A,[2,57]),_(A,[2,58]),_(A,[2,59]),{4:93,6:94,7:95,8:96,9:97,10:98,11:99,20:S,29:E,30:k,31:w,32:P,33:I,34:92,35:137,36:O},{4:93,6:94,7:95,8:96,9:97,10:98,11:99,20:S,29:E,30:k,31:w,32:P,33:I,34:92,35:138,36:O},{4:93,6:94,7:95,8:96,9:97,10:98,11:99,20:S,29:E,30:k,31:w,32:P,33:I,34:92,35:139,36:O},_(R,[2,16]),{12:140,13:N},_(A,[2,8],{13:[1,141]}),{15:T,19:[1,142]},{15:T,19:[1,143]},{15:T,19:[1,144]},_(R,[2,28]),{12:66,13:N,18:L,25:145},{19:[1,146]},{15:G,19:[1,147]},{15:G,19:[1,148]},{15:G,19:[1,149]},_(R,[2,33]),{17:150,18:$},{15:T,19:[1,151]},{15:z,19:[1,152]},{15:z,19:[1,153]},{15:z,19:[1,154]},_(R,[2,38]),{15:G,19:[1,155]},{15:G,19:[1,156]},{15:G,19:[1,157]},_(R,[2,43]),{15:z,19:[1,158]},{15:z,19:[1,159]},{15:z,19:[1,160]},_(R,[2,48]),{18:M,27:161},{15:z,19:[1,162]},{15:C,19:[1,163]},{15:C,19:[1,164]},{15:C,19:[1,165]},_(R,[2,62]),{4:93,6:94,7:95,8:96,9:97,10:98,11:99,20:S,29:E,30:k,31:w,32:P,33:I,34:166,36:O},{15:j,19:[1,167]},{15:j,19:[1,168]},{15:j,19:[1,169]},_(A,[2,11]),_(A,[2,9],{13:[1,170]}),_(R,[2,17]),_(R,[2,18]),_(R,[2,19]),_(A,[2,26]),_(A,[2,22]),_(R,[2,29]),_(R,[2,30]),_(R,[2,31]),_(A,[2,13]),_(A,[2,15]),_(R,[2,34]),_(R,[2,35]),_(R,[2,36]),_(R,[2,39]),_(R,[2,40]),_(R,[2,41]),_(R,[2,44]),_(R,[2,45]),_(R,[2,46]),_(A,[2,23]),_(A,[2,25]),_(R,[2,49]),_(R,[2,50]),_(R,[2,51]),_(A,[2,60]),_(R,[2,63]),_(R,[2,64]),_(R,[2,65]),_(A,[2,10])],defaultActions:{16:[2,1],17:[2,2],18:[2,3],19:[2,4],20:[2,5],21:[2,6],22:[2,7]},parseError:function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)},parse:function(t){var e=[0],r=[null],n=[],i=this.table,o="",s=0,l=0,a=n.slice.call(arguments,1),h=Object.create(this.lexer),u={yy:{}};for(var c in this.yy)Object.prototype.hasOwnProperty.call(this.yy,c)&&(u.yy[c]=this.yy[c]);h.setInput(t,u.yy),u.yy.lexer=h,u.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var p=h.yylloc;n.push(p);var f=h.options&&h.options.ranges;"function"==typeof u.yy.parseError?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,g,d,m,b,x,v,_,S,E={};;){if(g=e[e.length-1],this.defaultActions[g]?d=this.defaultActions[g]:(null==y&&(S=void 0,"number"!=typeof(S=h.lex()||1)&&(S=this.symbols_[S]||S),y=S),d=i[g]&&i[g][y]),void 0===d||!d.length||!d[0]){var k;for(b in _=[],i[g])this.terminals_[b]&&b>2&&_.push("'"+this.terminals_[b]+"'");k=h.showPosition?"Parse error on line "+(s+1)+":\n"+h.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(k,{text:h.match,token:this.terminals_[y]||y,line:h.yylineno,loc:p,expected:_})}if(d[0]instanceof Array&&d.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+y);switch(d[0]){case 1:e.push(y),r.push(h.yytext),n.push(h.yylloc),e.push(d[1]),y=null,l=h.yyleng,o=h.yytext,s=h.yylineno,p=h.yylloc;break;case 2:if(x=this.productions_[d[1]][1],E.$=r[r.length-x],E._$={first_line:n[n.length-(x||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(x||1)].first_column,last_column:n[n.length-1].last_column},f&&(E._$.range=[n[n.length-(x||1)].range[0],n[n.length-1].range[1]]),void 0!==(m=this.performAction.apply(E,[o,l,s,u.yy,d[1],r,n].concat(a))))return m;x&&(e=e.slice(0,-1*x*2),r=r.slice(0,-1*x),n=n.slice(0,-1*x)),e.push(this.productions_[d[1]][0]),r.push(E.$),n.push(E._$),v=i[e[e.length-2]][e[e.length-1]],e.push(v);break;case 3:return!0}}return!0}},F={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var r,n,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((r=this._input.match(this.rules[i[o]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:break;case 1:return 18;case 2:return 19;case 3:return 13;case 4:return 20;case 5:return 29;case 6:return 30;case 7:return 31;case 8:return 32;case 9:return 33;case 10:return 36;case 11:return 15;case 12:return 24;case 13:return 23;case 14:return 21;case 15:return 22;case 16:return 5;case 17:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:-?[0-9]+(\.[0-9]+)?([eE][\-\+]?[0-9]+)?)/,/^(?:POINT\b)/,/^(?:LINESTRING\b)/,/^(?:POLYGON\b)/,/^(?:MULTIPOINT\b)/,/^(?:MULTILINESTRING\b)/,/^(?:MULTIPOLYGON\b)/,/^(?:GEOMETRYCOLLECTION\b)/,/^(?:,)/,/^(?:EMPTY\b)/,/^(?:M\b)/,/^(?:Z\b)/,/^(?:ZM\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}}};function B(){this.yy={}}function U(t){this.data=[t],this.type="PointArray"}function Y(t){this.data=t,this.type="Ring"}function q(t){this.data=[t],this.type="RingList"}function D(t){this.data=[t],this.type="GeometryList"}function Z(t){this.data=[t],this.type="PolygonList"}J.lexer=F,B.prototype=J,J.Parser=B,J.yy.parseError=function(t){throw t},U.prototype.addPoint=function(t){return"PointArray"===t.type?this.data=this.data.concat(t.data):this.data.push(t),this},U.prototype.toJSON=function(){return this.data},Y.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.data.length;e++)t.push(this.data.data[e]);return t},q.prototype.addRing=function(t){return this.data.push(t),this},q.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.length;e++)t.push(this.data[e].toJSON());return t.length,t},D.prototype.addGeometry=function(t){return this.data.push(t),this},D.prototype.toJSON=function(){return this.data},Z.prototype.addPolygon=function(t){return this.data.push(t),this},Z.prototype.toJSON=function(){for(var t=[],e=0;e<this.data.length;e++)t=t.concat([this.data[e].toJSON()]);return t};class V{async execute(t){console.log("Inne fra aktivitet",t),console.log("Geometri-senter",t.geometri);const e=`https://nvdbapiles-v3.atlas.vegvesen.no/posisjon?ost=${t.geometri.x}&nord=${t.geometri.y}`;try{const r=await fetch(e),n=await r.json();if(console.log("Response from NVDB API:",n),200!==r.status)return{result:{error:!0,code:n[0].code,help_url:n[0].help_url,message:n[0].message,message_detailed:n[0].message_detailed,sok_geometri:t.geometri}};{const e=function(t){var e;try{e=J.parse(t)}catch(t){throw Error("Unable to parse: "+t)}return e}(n[0].geometri.wkt),r=new v.Point({x:e.coordinates[0],y:e.coordinates[1],spatialReference:{wkid:25833}});return{result:{error:!1,sok_geometri:t.geometri,vegsystemreferanse:n[0].vegsystemreferanse.kortform,apiResponse:n,vegsysref_punkt:r}}}}catch(e){return console.error("Error fetching data from NVDB API:",e),{result:{error:!0,sok_geometri:t.geometri}}}}}V.suite="uuid:f250d4a7-a6e0-4742-ae57-7af5b86dc555",V.action="uuid:f250d4a7-a6e0-4742-ae57-7af5b86dc555::Vegsysref_punktActivity";var K=V;let X;async function Q(){return X||(X=Promise.resolve(t),X)}}(),a}()}));