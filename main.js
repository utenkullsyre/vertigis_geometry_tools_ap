/*! For license information please see main.js.LICENSE.txt */
define(["@arcgis/core/geometry/support/jsonUtils","@arcgis/core/geometry/projection"],(function(t,e){return function(){var r,n,o={582:function(t,e,r){"use strict";var n=r(341),o=r(262),i=r(476),s=r(467).orient2d;function a(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;var o=function(t){for(var e=t[0],r=t[0],n=t[0],o=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<r[1]&&(r=a),a[1]>o[1]&&(o=a)}var l=[e,r,n,o],u=l.slice();for(s=0;s<t.length;s++)i(t[s],l)||u.push(t[s]);return function(t){t.sort(x);for(var e=[],r=0;r<t.length;r++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[r])<=0;)e.pop();e.push(t[r])}for(var n=[],o=t.length-1;o>=0;o--){for(;n.length>=2&&p(n[n.length-2],n[n.length-1],t[o])<=0;)n.pop();n.push(t[o])}return n.pop(),e.pop(),e.concat(n)}(u)}(t),s=new n(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,u=[],h=0;h<o.length;h++){var c=o[h];s.remove(c),a=y(c,a),u.push(a)}var f=new n(16);for(h=0;h<u.length;h++)f.insert(g(u[h]));for(var d=e*e,v=r*r;u.length;){var b=u.shift(),w=b.p,E=b.next.p,M=m(w,E);if(!(M<v)){var S=M/d;(c=l(s,b.prev.p,w,E,b.next.next.p,S,f))&&Math.min(m(c,w),m(c,E))<=S&&(u.push(b),u.push(y(c,b)),s.remove(c),f.remove(b),f.insert(g(b)),f.insert(g(b.next)))}}b=a;var _=[];do{_.push(b.p),b=b.next}while(b!==a);return _.push(b.p),_}function l(t,e,r,n,i,s,a){for(var l=new o([],u),c=t.data;c;){for(var p=0;p<c.children.length;p++){var g=c.children[p],y=c.leaf?d(g,r,n):h(r,n,g);y>s||l.push({node:g,dist:y})}for(;l.length&&!l.peek().node.children;){var m=l.pop(),v=m.node,x=d(v,e,r),b=d(v,n,i);if(m.dist<x&&m.dist<b&&f(r,v,a)&&f(n,v,a))return v}(c=l.pop())&&(c=c.node)}return null}function u(t,e){return t.dist-e.dist}function h(t,e,r){if(c(t,r)||c(e,r))return 0;var n=v(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var o=v(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===o)return 0;var i=v(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===i)return 0;var s=v(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===s?0:Math.min(n,o,i,s)}function c(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,r){for(var n,o,i,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),c=r.search({minX:a,minY:l,maxX:u,maxY:h}),f=0;f<c.length;f++)if(n=c[f].p,o=c[f].next.p,i=t,n!==(s=e)&&o!==i&&p(n,o,i)>0!=p(n,o,s)>0&&p(i,s,n)>0!=p(i,s,o)>0)return!1;return!0}function p(t,e,r){return s(t[0],t[1],e[0],e[1],r[0],r[1])}function g(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function y(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function m(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function d(t,e,r){var n=e[0],o=e[1],i=r[0]-n,s=r[1]-o;if(0!==i||0!==s){var a=((t[0]-n)*i+(t[1]-o)*s)/(i*i+s*s);a>1?(n=r[0],o=r[1]):a>0&&(n+=i*a,o+=s*a)}return(i=t[0]-n)*i+(s=t[1]-o)*s}function v(t,e,r,n,o,i,s,a){var l,u,h,c,f=r-t,p=n-e,g=s-o,y=a-i,m=t-o,d=e-i,v=f*f+p*p,x=f*g+p*y,b=g*g+y*y,w=f*m+p*d,E=g*m+y*d,M=v*b-x*x,S=M,_=M;0===M?(u=0,S=1,c=E,_=b):(c=v*E-x*w,(u=x*E-b*w)<0?(u=0,c=E,_=b):u>S&&(u=S,c=E+x,_=b)),c<0?(c=0,-w<0?u=0:-w>v?u=S:(u=-w,S=v)):c>_&&(c=_,-w+x<0?u=0:-w+x>v?u=S:(u=-w+x,S=v));var P=(1-(h=0===c?0:c/_))*o+h*s-((1-(l=0===u?0:u/S))*t+l*r),k=(1-h)*i+h*a-((1-l)*e+l*n);return P*P+k*k}function x(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}o.default&&(o=o.default),t.exports=a,t.exports.default=a},841:function(t){t.exports=function(t,e,r,n){var o=t[0],i=t[1],s=!1;void 0===r&&(r=0),void 0===n&&(n=e.length);for(var a=(n-r)/2,l=0,u=a-1;l<a;u=l++){var h=e[r+2*l+0],c=e[r+2*l+1],f=e[r+2*u+0],p=e[r+2*u+1];c>i!=p>i&&o<(f-h)*(i-c)/(p-c)+h&&(s=!s)}return s}},476:function(t,e,r){var n=r(841),o=r(137);t.exports=function(t,e,r,i){return e.length>0&&Array.isArray(e[0])?o(t,e,r,i):n(t,e,r,i)},t.exports.nested=o,t.exports.flat=n},137:function(t){t.exports=function(t,e,r,n){var o=t[0],i=t[1],s=!1;void 0===r&&(r=0),void 0===n&&(n=e.length);for(var a=n-r,l=0,u=a-1;l<a;u=l++){var h=e[l+r][0],c=e[l+r][1],f=e[u+r][0],p=e[u+r][1];c>i!=p>i&&o<(f-h)*(i-c)/(p-c)+h&&(s=!s)}return s}},4:function(t){t.exports=function(){"use strict";function t(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var e=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function r(t,e){return t>e?1:t<e?-1:0}function n(t,r,n){for(var o=new e(null,null),i=o,s=o;;){var a=n(t,r.key);if(a<0){if(null===r.left)break;if(n(t,r.left.key)<0){var l=r.left;if(r.left=l.right,l.right=r,null===(r=l).left)break}s.left=r,s=r,r=r.left}else{if(!(a>0))break;if(null===r.right)break;if(n(t,r.right.key)>0&&(l=r.right,r.right=l.left,l.left=r,null===(r=l).right))break;i.right=r,i=r,r=r.right}}return i.right=r.left,s.left=r.right,r.left=o.right,r.right=o.left,r}function o(t,r,o,i){var s=new e(t,r);if(null===o)return s.left=s.right=null,s;var a=i(t,(o=n(t,o,i)).key);return a<0?(s.left=o.left,s.right=o,o.left=null):a>=0&&(s.right=o.right,s.left=o,o.right=null),s}function i(t,e,r){var o=null,i=null;if(e){var s=r((e=n(t,e,r)).key,t);0===s?(o=e.left,i=e.right):s<0?(i=e.right,e.right=null,o=e):(o=e.left,e.left=null,i=e)}return{left:o,right:i}}function s(t,e,r,n,o){if(t){n(e+(r?"└── ":"├── ")+o(t)+"\n");var i=e+(r?"    ":"│   ");t.left&&s(t.left,i,!1,n,o),t.right&&s(t.right,i,!0,n,o)}}var a=function(){function a(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}return a.prototype.insert=function(t,e){return this._size++,this._root=o(t,e,this._root,this._comparator)},a.prototype.add=function(t,r){var o=new e(t,r);null===this._root&&(o.left=o.right=null,this._size++,this._root=o);var i=this._comparator,s=n(t,this._root,i),a=i(t,s.key);return 0===a?this._root=s:(a<0?(o.left=s.left,o.right=s,s.left=null):a>0&&(o.right=s.right,o.left=s,s.right=null),this._size++,this._root=o),this._root},a.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},a.prototype._remove=function(t,e,r){var o;return null===e?null:0===r(t,(e=n(t,e,r)).key)?(null===e.left?o=e.right:(o=n(t,e.left,r)).right=e.right,this._size--,o):e},a.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=n(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},a.prototype.findStatic=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},a.prototype.find=function(t){return this._root&&(this._root=n(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},a.prototype.contains=function(t){for(var e=this._root,r=this._comparator;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},a.prototype.forEach=function(t,e){for(var r=this._root,n=[],o=!1;!o;)null!==r?(n.push(r),r=r.left):0!==n.length?(r=n.pop(),t.call(e,r),r=r.right):o=!0;return this},a.prototype.range=function(t,e,r,n){for(var o=[],i=this._comparator,s=this._root;0!==o.length||s;)if(s)o.push(s),s=s.left;else{if(i((s=o.pop()).key,e)>0)break;if(i(s.key,t)>=0&&r.call(n,s))return this;s=s.right}return this},a.prototype.keys=function(){var t=[];return this.forEach((function(e){var r=e.key;return t.push(r)})),t},a.prototype.values=function(){var t=[];return this.forEach((function(e){var r=e.data;return t.push(r)})),t},a.prototype.min=function(){return this._root?this.minNode(this._root).key:null},a.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},a.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},a.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},a.prototype.at=function(t){for(var e=this._root,r=!1,n=0,o=[];!r;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),n===t)return e;n++,e=e.right}else r=!0;return null},a.prototype.next=function(t){var e=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var n=this._comparator;e;){var o=n(t.key,e.key);if(0===o)break;o<0?(r=e,e=e.left):e=e.right}return r},a.prototype.prev=function(t){var e=this._root,r=null;if(null!==t.left){for(r=t.left;r.right;)r=r.right;return r}for(var n=this._comparator;e;){var o=n(t.key,e.key);if(0===o)break;o<0?e=e.left:(r=e,e=e.right)}return r},a.prototype.clear=function(){return this._root=null,this._size=0,this},a.prototype.toList=function(){return function(t){for(var r=t,n=[],o=!1,i=new e(null,null),s=i;!o;)r?(n.push(r),r=r.left):n.length>0?r=(r=s=s.next=n.pop()).right:o=!0;return s.next=null,i.next}(this._root)},a.prototype.load=function(t,r,n){void 0===r&&(r=[]),void 0===n&&(n=!1);var o=t.length,i=this._comparator;if(n&&h(t,r,0,o-1,i),null===this._root)this._root=l(t,r,0,o),this._size=o;else{var s=function(t,r,n){for(var o=new e(null,null),i=o,s=t,a=r;null!==s&&null!==a;)n(s.key,a.key)<0?(i.next=s,s=s.next):(i.next=a,a=a.next),i=i.next;return null!==s?i.next=s:null!==a&&(i.next=a),o.next}(this.toList(),function(t,r){for(var n=new e(null,null),o=n,i=0;i<t.length;i++)o=o.next=new e(t[i],r[i]);return o.next=null,n.next}(t,r),i);o=this._size+o,this._root=u({head:s},0,o)}return this},a.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(a.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),a.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return s(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},a.prototype.update=function(t,e,r){var s=this._comparator,a=i(t,this._root,s),l=a.left,u=a.right;s(t,e)<0?u=o(e,r,u,s):l=o(e,r,l,s),this._root=function(t,e,r){return null===e?t:(null===t||((e=n(t.key,e,r)).left=t),e)}(l,u,s)},a.prototype.split=function(t){return i(t,this._root,this._comparator)},a.prototype[Symbol.iterator]=function(){var e,r,n;return t(this,(function(t){switch(t.label){case 0:e=this._root,r=[],n=!1,t.label=1;case 1:return n?[3,6]:null===e?[3,2]:(r.push(e),e=e.left,[3,5]);case 2:return 0===r.length?[3,4]:[4,e=r.pop()];case 3:return t.sent(),e=e.right,[3,5];case 4:n=!0,t.label=5;case 5:return[3,1];case 6:return[2]}}))},a}();function l(t,r,n,o){var i=o-n;if(i>0){var s=n+Math.floor(i/2),a=t[s],u=r[s],h=new e(a,u);return h.left=l(t,r,n,s),h.right=l(t,r,s+1,o),h}return null}function u(t,e,r){var n=r-e;if(n>0){var o=e+Math.floor(n/2),i=u(t,e,o),s=t.head;return s.left=i,t.head=t.head.next,s.right=u(t,o+1,r),s}return null}function h(t,e,r,n,o){if(!(r>=n)){for(var i=t[r+n>>1],s=r-1,a=n+1;;){do{s++}while(o(t[s],i)<0);do{a--}while(o(t[a],i)>0);if(s>=a)break;var l=t[s];t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}h(t,e,r,a,o),h(t,e,a+1,n,o)}}const c=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,f=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const r=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:r,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}};let p=Number.EPSILON;void 0===p&&(p=Math.pow(2,-52));const g=p*p,y=(t,e)=>{if(-p<t&&t<p&&-p<e&&e<p)return 0;const r=t-e;return r*r<g*t*e?0:t<e?-1:1};class m{constructor(){this.tree=new a,this.round(0)}round(t){const e=this.tree.add(t),r=this.tree.prev(e);if(null!==r&&0===y(e.key,r.key))return this.tree.remove(t),r.key;const n=this.tree.next(e);return null!==n&&0===y(e.key,n.key)?(this.tree.remove(t),n.key):t}}const d=new class{constructor(){this.reset()}reset(){this.xRounder=new m,this.yRounder=new m}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}},v=11102230246251565e-32,x=134217729,b=(3+8*v)*v;function w(t,e,r,n,o){let i,s,a,l,u=e[0],h=n[0],c=0,f=0;h>u==h>-u?(i=u,u=e[++c]):(i=h,h=n[++f]);let p=0;if(c<t&&f<r)for(h>u==h>-u?(s=u+i,a=i-(s-u),u=e[++c]):(s=h+i,a=i-(s-h),h=n[++f]),i=s,0!==a&&(o[p++]=a);c<t&&f<r;)h>u==h>-u?(s=i+u,l=s-i,a=i-(s-l)+(u-l),u=e[++c]):(s=i+h,l=s-i,a=i-(s-l)+(h-l),h=n[++f]),i=s,0!==a&&(o[p++]=a);for(;c<t;)s=i+u,l=s-i,a=i-(s-l)+(u-l),u=e[++c],i=s,0!==a&&(o[p++]=a);for(;f<r;)s=i+h,l=s-i,a=i-(s-l)+(h-l),h=n[++f],i=s,0!==a&&(o[p++]=a);return 0===i&&0!==p||(o[p++]=i),p}function E(t){return new Float64Array(t)}const M=22204460492503146e-32,S=11093356479670487e-47,_=E(4),P=E(8),k=E(12),I=E(16),R=E(4);function O(t,e,r,n,o,i){const s=(e-i)*(r-o),a=(t-o)*(n-i),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=33306690738754716e-32*u?l:-function(t,e,r,n,o,i,s){let a,l,u,h,c,f,p,g,y,m,d,v,E,O,A,Y,j,X;const N=t-o,B=r-o,L=e-i,F=n-i;O=N*F,f=x*N,p=f-(f-N),g=N-p,f=x*F,y=f-(f-F),m=F-y,A=g*m-(O-p*y-g*y-p*m),Y=L*B,f=x*L,p=f-(f-L),g=L-p,f=x*B,y=f-(f-B),m=B-y,j=g*m-(Y-p*y-g*y-p*m),d=A-j,c=A-d,_[0]=A-(d+c)+(c-j),v=O+d,c=v-O,E=O-(v-c)+(d-c),d=E-Y,c=E-d,_[1]=E-(d+c)+(c-Y),X=v+d,c=X-v,_[2]=v-(X-c)+(d-c),_[3]=X;let C=function(t,e){let r=e[0];for(let n=1;n<t;n++)r+=e[n];return r}(4,_),G=M*s;if(C>=G||-C>=G)return C;if(c=t-N,a=t-(N+c)+(c-o),c=r-B,u=r-(B+c)+(c-o),c=e-L,l=e-(L+c)+(c-i),c=n-F,h=n-(F+c)+(c-i),0===a&&0===l&&0===u&&0===h)return C;if(G=S*s+b*Math.abs(C),C+=N*h+F*a-(L*u+B*l),C>=G||-C>=G)return C;O=a*F,f=x*a,p=f-(f-a),g=a-p,f=x*F,y=f-(f-F),m=F-y,A=g*m-(O-p*y-g*y-p*m),Y=l*B,f=x*l,p=f-(f-l),g=l-p,f=x*B,y=f-(f-B),m=B-y,j=g*m-(Y-p*y-g*y-p*m),d=A-j,c=A-d,R[0]=A-(d+c)+(c-j),v=O+d,c=v-O,E=O-(v-c)+(d-c),d=E-Y,c=E-d,R[1]=E-(d+c)+(c-Y),X=v+d,c=X-v,R[2]=v-(X-c)+(d-c),R[3]=X;const T=w(4,_,4,R,P);O=N*h,f=x*N,p=f-(f-N),g=N-p,f=x*h,y=f-(f-h),m=h-y,A=g*m-(O-p*y-g*y-p*m),Y=L*u,f=x*L,p=f-(f-L),g=L-p,f=x*u,y=f-(f-u),m=u-y,j=g*m-(Y-p*y-g*y-p*m),d=A-j,c=A-d,R[0]=A-(d+c)+(c-j),v=O+d,c=v-O,E=O-(v-c)+(d-c),d=E-Y,c=E-d,R[1]=E-(d+c)+(c-Y),X=v+d,c=X-v,R[2]=v-(X-c)+(d-c),R[3]=X;const q=w(T,P,4,R,k);O=a*h,f=x*a,p=f-(f-a),g=a-p,f=x*h,y=f-(f-h),m=h-y,A=g*m-(O-p*y-g*y-p*m),Y=l*u,f=x*l,p=f-(f-l),g=l-p,f=x*u,y=f-(f-u),m=u-y,j=g*m-(Y-p*y-g*y-p*m),d=A-j,c=A-d,R[0]=A-(d+c)+(c-j),v=O+d,c=v-O,E=O-(v-c)+(d-c),d=E-Y,c=E-d,R[1]=E-(d+c)+(c-Y),X=v+d,c=X-v,R[2]=v-(X-c)+(d-c),R[3]=X;const J=w(q,k,4,R,I);return I[J-1]}(t,e,r,n,o,i,u)}const A=(t,e)=>t.x*e.y-t.y*e.x,Y=(t,e)=>t.x*e.x+t.y*e.y,j=(t,e,r)=>{const n=O(t.x,t.y,e.x,e.y,r.x,r.y);return n>0?-1:n<0?1:0},X=t=>Math.sqrt(Y(t,t)),N=(t,e,r)=>{const n={x:e.x-t.x,y:e.y-t.y},o={x:r.x-t.x,y:r.y-t.y};return A(o,n)/X(o)/X(n)},B=(t,e,r)=>{const n={x:e.x-t.x,y:e.y-t.y},o={x:r.x-t.x,y:r.y-t.y};return Y(o,n)/X(o)/X(n)},L=(t,e,r)=>0===e.y?null:{x:t.x+e.x/e.y*(r-t.y),y:r},F=(t,e,r)=>0===e.x?null:{x:r,y:t.y+e.y/e.x*(r-t.x)};class C{static compare(t,e){const r=C.comparePoints(t.point,e.point);return 0!==r?r:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:T.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const e=t.point.events;for(let t=0,r=e.length;t<r;t++){const r=e[t];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let e=0;e<t;e++){const r=this.point.events[e];if(void 0===r.segment.consumedBy)for(let n=e+1;n<t;n++){const t=this.point.events[n];void 0===t.consumedBy&&r.otherSE.point.events===t.otherSE.point.events&&r.segment.consume(t.segment)}}}getAvailableLinkedEvents(){const t=[];for(let e=0,r=this.point.events.length;e<r;e++){const r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}getLeftmostComparator(t){const e=new Map,r=r=>{const n=r.otherSE;e.set(r,{sine:N(this.point,t.point,n.point),cosine:B(this.point,t.point,n.point)})};return(t,n)=>{e.has(t)||r(t),e.has(n)||r(n);const{sine:o,cosine:i}=e.get(t),{sine:s,cosine:a}=e.get(n);return o>=0&&s>=0?i<a?1:i>a?-1:0:o<0&&s<0?i<a?-1:i>a?1:0:s<o?-1:s>o?1:0}}}let G=0;class T{static compare(t,e){const r=t.leftSE.point.x,n=e.leftSE.point.x,o=t.rightSE.point.x,i=e.rightSE.point.x;if(i<r)return 1;if(o<n)return-1;const s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(r<n){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;const r=t.comparePoint(e.leftSE.point);if(r<0)return 1;if(r>0)return-1;const n=e.comparePoint(t.rightSE.point);return 0!==n?n:-1}if(r>n){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;const r=e.comparePoint(t.leftSE.point);if(0!==r)return r;const n=t.comparePoint(e.rightSE.point);return n<0?1:n>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(o<i){const r=e.comparePoint(t.rightSE.point);if(0!==r)return r}if(o>i){const r=t.comparePoint(e.rightSE.point);if(r<0)return 1;if(r>0)return-1}if(o!==i){const t=l-s,e=o-r,h=u-a,c=i-n;if(t>e&&h<c)return 1;if(t<e&&h>c)return-1}return o>i?1:o<i||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,r,n){this.id=++G,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=r,this.windings=n}static fromRing(t,e,r){let n,o,i;const s=C.comparePoints(t,e);if(s<0)n=t,o=e,i=1;else{if(!(s>0))throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);n=e,o=t,i=-1}const a=new C(n,!0),l=new C(o,!1);return new T(a,l,[r],[i])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const e=this.leftSE.point,r=this.rightSE.point,n=this.vector();if(e.x===r.x)return t.x===e.x?0:t.x<e.x?1:-1;const o=(t.y-e.y)/n.y,i=e.x+o*n.x;if(t.x===i)return 0;const s=(t.x-e.x)/n.x,a=e.y+s*n.y;return t.y===a?0:t.y<a?-1:1}getIntersection(t){const e=this.bbox(),r=t.bbox(),n=f(e,r);if(null===n)return null;const o=this.leftSE.point,i=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=c(e,s)&&0===this.comparePoint(s),u=c(r,o)&&0===t.comparePoint(o),h=c(e,a)&&0===this.comparePoint(a),p=c(r,i)&&0===t.comparePoint(i);if(u&&l)return p&&!h?i:!p&&h?a:null;if(u)return h&&o.x===a.x&&o.y===a.y?null:o;if(l)return p&&i.x===s.x&&i.y===s.y?null:s;if(p&&h)return null;if(p)return i;if(h)return a;const g=((t,e,r,n)=>{if(0===e.x)return F(r,n,t.x);if(0===n.x)return F(t,e,r.x);if(0===e.y)return L(r,n,t.y);if(0===n.y)return L(t,e,r.y);const o=A(e,n);if(0==o)return null;const i={x:r.x-t.x,y:r.y-t.y},s=A(i,e)/o,a=A(i,n)/o;return{x:(t.x+a*e.x+(r.x+s*n.x))/2,y:(t.y+a*e.y+(r.y+s*n.y))/2}})(o,this.vector(),s,t.vector());return null===g?null:c(n,g)?d.round(g.x,g.y):null}split(t){const e=[],r=void 0!==t.events,n=new C(t,!0),o=new C(t,!1),i=this.rightSE;this.replaceRightSE(o),e.push(o),e.push(n);const s=new T(n,i,this.rings.slice(),this.windings.slice());return C.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),C.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(n.checkForConsuming(),o.checkForConsuming()),e}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,e=this.windings.length;t<e;t++)this.windings[t]*=-1}consume(t){let e=this,r=t;for(;e.consumedBy;)e=e.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const n=T.compare(e,r);if(0!==n){if(n>0){const t=e;e=r,r=t}if(e.prev===r){const t=e;e=r,r=t}for(let t=0,n=r.rings.length;t<n;t++){const n=r.rings[t],o=r.windings[t],i=e.rings.indexOf(n);-1===i?(e.rings.push(n),e.windings.push(o)):e.windings[i]+=o}r.rings=null,r.windings=null,r.consumedBy=e,r.leftSE.consumedBy=e.leftSE,r.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const e=this._afterState.rings,r=this._afterState.windings,n=this._afterState.multiPolys;for(let t=0,n=this.rings.length;t<n;t++){const n=this.rings[t],o=this.windings[t],i=e.indexOf(n);-1===i?(e.push(n),r.push(o)):r[i]+=o}const o=[],i=[];for(let t=0,n=e.length;t<n;t++){if(0===r[t])continue;const n=e[t],s=n.poly;if(-1===i.indexOf(s))if(n.isExterior)o.push(s);else{-1===i.indexOf(s)&&i.push(s);const t=o.indexOf(n.poly);-1!==t&&o.splice(t,1)}}for(let t=0,e=o.length;t<e;t++){const e=o[t].multiPoly;-1===n.indexOf(e)&&n.push(e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;const t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Q.type){case"union":{const r=0===t.length,n=0===e.length;this._isInResult=r!==n;break}case"intersection":{let r,n;t.length<e.length?(r=t.length,n=e.length):(r=e.length,n=t.length),this._isInResult=n===Q.numMultiPolys&&r<n;break}case"xor":{const r=Math.abs(t.length-e.length);this._isInResult=r%2==1;break}case"difference":{const r=t=>1===t.length&&t[0].isSubject;this._isInResult=r(t)!==r(e);break}default:throw new Error(`Unrecognized operation type found ${Q.type}`)}return this._isInResult}}class q{constructor(t,e,r){if(!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=r,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const n=d.round(t[0][0],t[0][1]);this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};let o=n;for(let e=1,r=t.length;e<r;e++){if("number"!=typeof t[e][0]||"number"!=typeof t[e][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let r=d.round(t[e][0],t[e][1]);r.x===o.x&&r.y===o.y||(this.segments.push(T.fromRing(o,r,this)),r.x<this.bbox.ll.x&&(this.bbox.ll.x=r.x),r.y<this.bbox.ll.y&&(this.bbox.ll.y=r.y),r.x>this.bbox.ur.x&&(this.bbox.ur.x=r.x),r.y>this.bbox.ur.y&&(this.bbox.ur.y=r.y),o=r)}n.x===o.x&&n.y===o.y||this.segments.push(T.fromRing(o,n,this))}getSweepEvents(){const t=[];for(let e=0,r=this.segments.length;e<r;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}class J{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new q(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let e=1,r=t.length;e<r;e++){const r=new q(t[e],this,!1);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,r=this.interiorRings.length;e<r;e++){const r=this.interiorRings[e].getSweepEvents();for(let e=0,n=r.length;e<n;e++)t.push(r[e])}return t}}class z{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let e=0,r=t.length;e<r;e++){const r=new J(t[e],this);r.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,r=this.polys.length;e<r;e++){const r=this.polys[e].getSweepEvents();for(let e=0,n=r.length;e<n;e++)t.push(r[e])}return t}}class ${static factory(t){const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(!n.isInResult()||n.ringOut)continue;let o=null,i=n.leftSE,s=n.rightSE;const a=[i],l=i.point,u=[];for(;o=i,i=s,a.push(i),i.point!==l;)for(;;){const t=i.getAvailableLinkedEvents();if(0===t.length){const t=a[0].point,e=a[a.length-1].point;throw new Error(`Unable to complete output ring starting at [${t.x}, ${t.y}]. Last matching segment found ends at [${e.x}, ${e.y}].`)}if(1===t.length){s=t[0].otherSE;break}let r=null;for(let t=0,e=u.length;t<e;t++)if(u[t].point===i.point){r=t;break}if(null!==r){const t=u.splice(r)[0],n=a.splice(t.index);n.unshift(n[0].otherSE),e.push(new $(n.reverse()));continue}u.push({index:a.length,point:i.point});const n=i.getLeftmostComparator(o);s=t.sort(n)[0].otherSE;break}e.push(new $(a))}return e}constructor(t){this.events=t;for(let e=0,r=t.length;e<r;e++)t[e].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const e=[t];for(let r=1,n=this.events.length-1;r<n;r++){const n=this.events[r].point,o=this.events[r+1].point;0!==j(n,t,o)&&(e.push(n),t=n)}if(1===e.length)return null;const r=e[0],n=e[1];0===j(r,t,n)&&e.shift(),e.push(e[0]);const o=this.isExteriorRing()?1:-1,i=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,a=[];for(let t=i;t!=s;t+=o)a.push([e[t].x,e[t].y]);return a}isExteriorRing(){if(void 0===this._isExteriorRing){const t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let e=1,r=this.events.length;e<r;e++){const r=this.events[e];C.compare(t,r)>0&&(t=r)}let e=t.segment.prevInResult(),r=e?e.prevInResult():null;for(;;){if(!e)return null;if(!r)return e.ringOut;if(r.ringOut!==e.ringOut)return r.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing();e=r.prevInResult(),r=e?e.prevInResult():null}}}class D{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(let e=0,r=this.interiorRings.length;e<r;e++){const r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}class U{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,r=this.polys.length;e<r;e++){const r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}_composePolys(t){const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(!n.poly)if(n.isExteriorRing())e.push(new D(n));else{const t=n.enclosingRing();t.poly||e.push(new D(t)),t.poly.addInterior(n)}}return e}}class Z{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.compare;this.queue=t,this.tree=new a(e),this.segments=[]}process(t){const e=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),r;const n=t.isLeft?this.tree.add(e):this.tree.find(e);if(!n)throw new Error(`Unable to find segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] in SweepLine tree.`);let o,i,s=n,a=n;for(;void 0===o;)s=this.tree.prev(s),null===s?o=null:void 0===s.key.consumedBy&&(o=s.key);for(;void 0===i;)a=this.tree.next(a),null===a?i=null:void 0===a.key.consumedBy&&(i=a.key);if(t.isLeft){let n=null;if(o){const t=o.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(n=t),!o.isAnEndpoint(t))){const e=this._splitSafely(o,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}let s=null;if(i){const t=i.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(s=t),!i.isAnEndpoint(t))){const e=this._splitSafely(i,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}if(null!==n||null!==s){let t=null;t=null===n?s:null===s||C.comparePoints(n,s)<=0?n:s,this.queue.remove(e.rightSE),r.push(e.rightSE);const o=e.split(t);for(let t=0,e=o.length;t<e;t++)r.push(o[t])}r.length>0?(this.tree.remove(e),r.push(t)):(this.segments.push(e),e.prev=o)}else{if(o&&i){const t=o.getIntersection(i);if(null!==t){if(!o.isAnEndpoint(t)){const e=this._splitSafely(o,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}if(!i.isAnEndpoint(t)){const e=this._splitSafely(i,t);for(let t=0,n=e.length;t<n;t++)r.push(e[t])}}}this.tree.remove(e)}return r}_splitSafely(t,e){this.tree.remove(t);const r=t.rightSE;this.queue.remove(r);const n=t.split(e);return n.push(r),void 0===t.consumedBy&&this.tree.add(t),n}}const V="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,K="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;const Q=new class{run(t,e,r){Q.type=t,d.reset();const n=[new z(e,!0)];for(let t=0,e=r.length;t<e;t++)n.push(new z(r[t],!1));if(Q.numMultiPolys=n.length,"difference"===Q.type){const t=n[0];let e=1;for(;e<n.length;)null!==f(n[e].bbox,t.bbox)?e++:n.splice(e,1)}if("intersection"===Q.type)for(let t=0,e=n.length;t<e;t++){const e=n[t];for(let r=t+1,o=n.length;r<o;r++)if(null===f(e.bbox,n[r].bbox))return[]}const o=new a(C.compare);for(let t=0,e=n.length;t<e;t++){const e=n[t].getSweepEvents();for(let t=0,r=e.length;t<r;t++)if(o.insert(e[t]),o.size>V)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const i=new Z(o);let s=o.size,l=o.pop();for(;l;){const t=l.key;if(o.size===s){const e=t.segment;throw new Error(`Unable to pop() ${t.isLeft?"left":"right"} SweepEvent [${t.point.x}, ${t.point.y}] from segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] from queue.`)}if(o.size>V)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(i.segments.length>K)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const e=i.process(t);for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0===r.consumedBy&&o.insert(r)}s=o.size,l=o.pop()}d.reset();const u=$.factory(i.segments);return new U(u).getGeom()}};return{union:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Q.run("union",t,r)},intersection:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Q.run("intersection",t,r)},xor:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Q.run("xor",t,r)},difference:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Q.run("difference",t,r)}}}()},341:function(t){t.exports=function(){"use strict";function t(t,n,o,i,s){!function t(r,n,o,i,s){for(;i>o;){if(i-o>600){var a=i-o+1,l=n-o+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1);t(r,n,Math.max(o,Math.floor(n-l*h/a+c)),Math.min(i,Math.floor(n+(a-l)*h/a+c)),s)}var f=r[n],p=o,g=i;for(e(r,o,n),s(r[i],f)>0&&e(r,o,i);p<g;){for(e(r,p,g),p++,g--;s(r[p],f)<0;)p++;for(;s(r[g],f)>0;)g--}0===s(r[o],f)?e(r,o,g):e(r,++g,i),g<=n&&(o=g+1),n<=g&&(i=g-1)}}(t,n,o||0,i||t.length-1,s||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function i(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,o){o||(o=g(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i=e;i<r;i++){var s=t.children[i];a(o,t.leaf?n(s):s)}return o}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(e,r,n,o,i){for(var s=[r,n];s.length;)if(!((n=s.pop())-(r=s.pop())<=o)){var a=r+Math.ceil((n-r)/o/2)*o;t(e,a,r,n,i),s.push(r,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,o=[];e;){for(var i=0;i<e.children.length;i++){var s=e.children[i],a=e.leaf?n(s):s;p(t,a)&&(e.leaf?r.push(s):f(t,a)?this._all(s,r):o.push(s))}e=o.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var o=e.children[n],i=e.leaf?this.toBBox(o):o;if(p(t,i)){if(e.leaf||f(t,i))return!0;r.push(o)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=g([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,i,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=u.pop(),i=!0),s.leaf){var h=o(t,s.children,e);if(-1!==h)return s.children.splice(h,1),l.push(s),this._condense(l),this}i||s.leaf||!f(s,a)?n?(r++,s=n.children[r],i=!1):s=null:(l.push(s),u.push(r),r=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var o,s=r-e+1,a=this._maxEntries;if(s<=a)return i(o=g(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(o=g([])).leaf=!1,o.height=n;var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));y(t,e,r,u,this.compareMinX);for(var h=e;h<=r;h+=u){var c=Math.min(h+u-1,r);y(t,h,c,l,this.compareMinY);for(var f=h;f<=c;f+=l){var p=Math.min(f+l-1,c);o.children.push(this._build(t,f,p,n-1))}}return i(o,this.toBBox),o},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var o=1/0,i=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=h(l),c=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u);c<i?(i=c,o=u<o?u:o,s=l):c===i&&u<o&&(o=u,s=l)}e=s||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),o=[],i=this._chooseSubtree(n,this.data,e,o);for(i.children.push(t),a(i,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var s=this._chooseSplitIndex(r,o,n),a=g(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,i(r,this.toBBox),i(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(r,a)},n.prototype._splitRoot=function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,o,i,a,l,u,c,f=1/0,p=1/0,g=e;g<=r-e;g++){var y=s(t,0,g,this.toBBox),m=s(t,g,r,this.toBBox),d=(o=y,i=m,void 0,void 0,void 0,void 0,a=Math.max(o.minX,i.minX),l=Math.max(o.minY,i.minY),u=Math.min(o.maxX,i.maxX),c=Math.min(o.maxY,i.maxY),Math.max(0,u-a)*Math.max(0,c-l)),v=h(y)+h(m);d<f?(f=d,n=g,p=v<p?v:p):d===f&&v<p&&(p=v,n=g)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var o=this.toBBox,i=s(t,0,e,o),l=s(t,r-e,r,o),u=c(i)+c(l),h=e;h<r-e;h++){var f=t.children[h];a(i,t.leaf?o(f):f),u+=c(i)}for(var p=r-e-1;p>=e;p--){var g=t.children[p];a(l,t.leaf?o(g):g),u+=c(l)}return u},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():i(t[e],this.toBBox)},n}()},467:function(t,e){!function(t){"use strict";const e=134217729;function r(t,e,r,n,o){let i,s,a,l,u=e[0],h=n[0],c=0,f=0;h>u==h>-u?(i=u,u=e[++c]):(i=h,h=n[++f]);let p=0;if(c<t&&f<r)for(h>u==h>-u?(a=i-((s=u+i)-u),u=e[++c]):(a=i-((s=h+i)-h),h=n[++f]),i=s,0!==a&&(o[p++]=a);c<t&&f<r;)h>u==h>-u?(a=i-((s=i+u)-(l=s-i))+(u-l),u=e[++c]):(a=i-((s=i+h)-(l=s-i))+(h-l),h=n[++f]),i=s,0!==a&&(o[p++]=a);for(;c<t;)a=i-((s=i+u)-(l=s-i))+(u-l),u=e[++c],i=s,0!==a&&(o[p++]=a);for(;f<r;)a=i-((s=i+h)-(l=s-i))+(h-l),h=n[++f],i=s,0!==a&&(o[p++]=a);return 0===i&&0!==p||(o[p++]=i),p}function n(t){return new Float64Array(t)}const o=n(4),i=n(8),s=n(12),a=n(16),l=n(4);t.orient2d=function(t,n,u,h,c,f){const p=(n-f)*(u-c),g=(t-c)*(h-f),y=p-g;if(0===p||0===g||p>0!=g>0)return y;const m=Math.abs(p+g);return Math.abs(y)>=33306690738754716e-32*m?y:-function(t,n,u,h,c,f,p){let g,y,m,d,v,x,b,w,E,M,S,_,P,k,I,R,O,A;const Y=t-c,j=u-c,X=n-f,N=h-f;v=(I=(w=Y-(b=(x=e*Y)-(x-Y)))*(M=N-(E=(x=e*N)-(x-N)))-((k=Y*N)-b*E-w*E-b*M))-(S=I-(O=(w=X-(b=(x=e*X)-(x-X)))*(M=j-(E=(x=e*j)-(x-j)))-((R=X*j)-b*E-w*E-b*M))),o[0]=I-(S+v)+(v-O),v=(P=k-((_=k+S)-(v=_-k))+(S-v))-(S=P-R),o[1]=P-(S+v)+(v-R),v=(A=_+S)-_,o[2]=_-(A-v)+(S-v),o[3]=A;let B=function(t,e){let r=e[0];for(let t=1;t<4;t++)r+=e[t];return r}(0,o),L=22204460492503146e-32*p;if(B>=L||-B>=L)return B;if(g=t-(Y+(v=t-Y))+(v-c),m=u-(j+(v=u-j))+(v-c),y=n-(X+(v=n-X))+(v-f),d=h-(N+(v=h-N))+(v-f),0===g&&0===y&&0===m&&0===d)return B;if(L=11093356479670487e-47*p+33306690738754706e-32*Math.abs(B),(B+=Y*d+N*g-(X*m+j*y))>=L||-B>=L)return B;v=(I=(w=g-(b=(x=e*g)-(x-g)))*(M=N-(E=(x=e*N)-(x-N)))-((k=g*N)-b*E-w*E-b*M))-(S=I-(O=(w=y-(b=(x=e*y)-(x-y)))*(M=j-(E=(x=e*j)-(x-j)))-((R=y*j)-b*E-w*E-b*M))),l[0]=I-(S+v)+(v-O),v=(P=k-((_=k+S)-(v=_-k))+(S-v))-(S=P-R),l[1]=P-(S+v)+(v-R),v=(A=_+S)-_,l[2]=_-(A-v)+(S-v),l[3]=A;const F=r(4,o,4,l,i);v=(I=(w=Y-(b=(x=e*Y)-(x-Y)))*(M=d-(E=(x=e*d)-(x-d)))-((k=Y*d)-b*E-w*E-b*M))-(S=I-(O=(w=X-(b=(x=e*X)-(x-X)))*(M=m-(E=(x=e*m)-(x-m)))-((R=X*m)-b*E-w*E-b*M))),l[0]=I-(S+v)+(v-O),v=(P=k-((_=k+S)-(v=_-k))+(S-v))-(S=P-R),l[1]=P-(S+v)+(v-R),v=(A=_+S)-_,l[2]=_-(A-v)+(S-v),l[3]=A;const C=r(F,i,4,l,s);v=(I=(w=g-(b=(x=e*g)-(x-g)))*(M=d-(E=(x=e*d)-(x-d)))-((k=g*d)-b*E-w*E-b*M))-(S=I-(O=(w=y-(b=(x=e*y)-(x-y)))*(M=m-(E=(x=e*m)-(x-m)))-((R=y*m)-b*E-w*E-b*M))),l[0]=I-(S+v)+(v-O),v=(P=k-((_=k+S)-(v=_-k))+(S-v))-(S=P-R),l[1]=P-(S+v)+(v-R),v=(A=_+S)-_,l[2]=_-(A-v)+(S-v),l[3]=A;const G=r(C,s,4,l,a);return a[G-1]}(t,n,u,h,c,f,m)},t.orient2dfast=function(t,e,r,n,o,i){return(e-i)*(r-o)-(t-o)*(n-i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},262:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return n}});class n{constructor(t=[],e=o){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const o=t-1>>1,i=e[o];if(r(n,i)>=0)break;e[t]=i,t=o}e[t]=n}_down(t){const{data:e,compare:r}=this,n=this.length>>1,o=e[t];for(;t<n;){let n=1+(t<<1),i=e[n];const s=n+1;if(s<this.length&&r(e[s],i)<0&&(n=s,i=e[s]),r(i,o)>=0)break;e[t]=i,t=n}e[t]=o}}function o(t,e){return t<e?-1:t>e?1:0}},414:function(t){"use strict";t.exports=e},770:function(e){"use strict";e.exports=t}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return o[t].call(r.exports,r,r.exports,s),r.exports}n=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},s.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var o=Object.create(null);s.r(o);var i={};r=r||[null,n({}),n([]),n(n)];for(var a=2&e&&t;"object"==typeof a&&!~r.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((function(e){i[e]=function(){return t[e]}}));return i.default=function(){return t},s.d(o,i),o},s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return function(){"use strict";s.r(a),s.d(a,{main:function(){return ut}});var t={};s.r(t),s.d(t,{DissolveActivity:function(){return at},Kopier_tekstActivity:function(){return nt},LinjeBiterActivity:function(){return et},PunktLangsLinjeActivity:function(){return q},SkalerGeometriActivity:function(){return W},Turf_testActivity:function(){return B}});var e=function(t,e,r,n){var o=(n[0]-r[0])*(t[1]-r[1])-(n[1]-r[1])*(t[0]-r[0]),i=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]),s=(n[1]-r[1])*(e[0]-t[0])-(n[0]-r[0])*(e[1]-t[1]);if(0!==s){var a=o/s,l=i/s;if(a>=0&&a<=1&&l>=0&&l<=1)return!0}return!1},r=function(t,r){for(var n=0;n<t.length-1;n++)for(var o=0;o<r.length-1;o++)if(e(t[n],t[n+1],r[o],r[o+1]))return!0;return!1},n=function(t){return function(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t},o=function(t){for(var e,r=0,n=0,o=t.length,i=t[n];n<o-1;n++)r+=((e=t[n+1])[0]-i[0])*(e[1]+i[1]),i=e;return r>=0},i=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},l=function(t,e){var n=r(t,e),o=function(t,e){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n][1]<=e[1]&&e[1]<t[i][1]||t[i][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[i][0]-t[n][0])*(e[1]-t[n][1])/(t[i][1]-t[n][1])+t[n][0]&&(r=!r);return r}(t,e[0]);return!(n||!o)},u=function t(e,s){var a={};if(e.features){a.type="FeatureCollection",a.features=[];for(var u=0;u<e.features.length;u++)a.features.push(t(e.features[u],s))}if("number"==typeof e.x&&"number"==typeof e.y&&(a.type="Point",a.coordinates=[e.x,e.y],"number"==typeof e.z&&a.coordinates.push(e.z)),e.points&&(a.type="MultiPoint",a.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(a.type="LineString",a.coordinates=e.paths[0].slice(0)):(a.type="MultiLineString",a.coordinates=e.paths.slice(0))),e.rings&&(a=function(t){for(var e,i,s,a=[],u=[],h=0;h<t.length;h++){var c=n(t[h].slice(0));if(!(c.length<4))if(o(c)){var f=[c.slice().reverse()];a.push(f)}else u.push(c.slice().reverse())}for(var p=[];u.length;){s=u.pop();var g=!1;for(e=a.length-1;e>=0;e--)if(i=a[e][0],l(i,s)){a[e].push(s),g=!0;break}g||p.push(s)}for(;p.length;){s=p.pop();var y=!1;for(e=a.length-1;e>=0;e--)if(i=a[e][0],r(i,s)){a[e].push(s),y=!0;break}y||a.push([s.reverse()])}return 1===a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(a.type="Polygon",a.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(a.type="Feature",a.geometry=e.geometry?t(e.geometry):null,a.properties=e.attributes?i(e.attributes):null,e.attributes))try{a.id=function(t,e){for(var r=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<r.length;n++){var o=r[n];if(o in t&&("string"==typeof t[o]||"number"==typeof t[o]))return t[o]}throw Error("No valid id attribute found")}(e.attributes,s)}catch(t){}return JSON.stringify(a.geometry)===JSON.stringify({})&&(a.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),a},h=function(t){var e=[],r=t.slice(0),i=n(r.shift().slice(0));if(i.length>=4){o(i)||i.reverse(),e.push(i);for(var s=0;s<r.length;s++){var a=n(r[s].slice(0));a.length>=4&&(o(a)&&a.reverse(),e.push(a))}}return e},c=function t(e,r){r=r||"OBJECTID";var n,o={wkid:4326},s={};switch(e.type){case"Point":s.x=e.coordinates[0],s.y=e.coordinates[1],null!=e.coordinates[2]&&(s.z=e.coordinates[2]),s.spatialReference=o;break;case"MultiPoint":s.points=e.coordinates.slice(0),null!=e.coordinates[0][2]&&(s.hasZ=!0),s.spatialReference=o;break;case"LineString":s.paths=[e.coordinates.slice(0)],null!=e.coordinates[0][2]&&(s.hasZ=!0),s.spatialReference=o;break;case"MultiLineString":s.paths=e.coordinates.slice(0),null!=e.coordinates[0][0][2]&&(s.hasZ=!0),s.spatialReference=o;break;case"Polygon":s.rings=h(e.coordinates.slice(0)),null!=e.coordinates[0][0][2]&&(s.hasZ=!0),s.spatialReference=o;break;case"MultiPolygon":s.rings=function(t){for(var e=[],r=0;r<t.length;r++)for(var n=h(t[r]),o=n.length-1;o>=0;o--){var i=n[o].slice(0);e.push(i)}return e}(e.coordinates.slice(0)),null!=e.coordinates[0][0][0][2]&&(s.hasZ=!0),s.spatialReference=o;break;case"Feature":e.geometry&&(s.geometry=t(e.geometry,r)),s.attributes=e.properties?i(e.properties):{},e.id&&(s.attributes[r]=e.id);break;case"FeatureCollection":for(s=[],n=0;n<e.features.length;n++)s.push(t(e.features[n],r));break;case"GeometryCollection":for(s=[],n=0;n<e.geometries.length;n++)s.push(t(e.geometries[n],r))}return s},f=6371008.8,p={centimeters:100*f,centimetres:100*f,degrees:360/(2*Math.PI),feet:3.28084*f,inches:39.37*f,kilometers:f/1e3,kilometres:f/1e3,meters:f,metres:f,miles:f/1609.344,millimeters:1e3*f,millimetres:1e3*f,nauticalmiles:f/1852,radians:1,yards:1.0936*f};function g(t,e,r={}){const n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function y(t,e,r={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!S(t[0])||!S(t[1]))throw new Error("coordinates must contain numbers");return g({type:"Point",coordinates:t},e,r)}function m(t,e,r={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return g({type:"LineString",coordinates:t},e,r)}function d(t,e={}){const r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function v(t,e,r={}){return g({type:"MultiPolygon",coordinates:t},e,r)}function x(t,e="kilometers"){const r=p[e];if(!r)throw new Error(e+" units is invalid");return t*r}function b(t,e="kilometers"){const r=p[e];if(!r)throw new Error(e+" units is invalid");return t/r}function w(t){return t%(2*Math.PI)*180/Math.PI}function E(t){return t%360*Math.PI/180}function M(t,e="kilometers",r="kilometers"){if(!(t>=0))throw new Error("length must be a positive number");return x(b(t,e),r)}function S(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function _(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)}function P(t,e,r){if(null!==t)for(var n,o,i,s,a,l,u,h,c=0,f=0,p=t.type,g="FeatureCollection"===p,y="Feature"===p,m=g?t.features.length:1,d=0;d<m;d++){a=(h=!!(u=g?t.features[d].geometry:y?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<a;v++){var x=0,b=0;if(null!==(s=h?u.geometries[v]:u)){l=s.coordinates;var w=s.type;switch(c=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,f,d,x,b))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],f,d,x,b))return!1;f++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-c;o++){if(!1===e(l[n][o],f,d,x,b))return!1;f++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(b=0,o=0;o<l[n].length;o++){for(i=0;i<l[n][o].length-c;i++){if(!1===e(l[n][o][i],f,d,x,b))return!1;f++}b++}x++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===P(s.geometries[n],e,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length&&!1!==e(t.features[r],r);r++);}function I(t,e){!function(t,e){var r,n,o,i,s,a,l,u,h,c,f=0,p="FeatureCollection"===t.type,g="Feature"===t.type,y=p?t.features.length:1;for(r=0;r<y;r++){for(a=p?t.features[r].geometry:g?t.geometry:t,u=p?t.features[r].properties:g?t.properties:{},h=p?t.features[r].bbox:g?t.bbox:void 0,c=p?t.features[r].id:g?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=l?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,f,u,h,c))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],f,u,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,h,c))return!1;f++}}(t,(function(t,r,n,o,i){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(g(t,n,{bbox:o,id:i}),r,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(g({type:s,coordinates:u},n),r,l))return!1}}))}var R=s(582);function O(t,e={}){e.concavity=e.concavity||1/0;const r=[];if(P(t,(t=>{r.push([t[0],t[1]])})),!r.length)return null;const n=R(r,e.concavity);return n.length>3?function(t,e,r={}){for(const e of t){if(e.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(e[e.length-1].length!==e[0].length)throw new Error("First and last Position are not equivalent.");for(let t=0;t<e[e.length-1].length;t++)if(e[e.length-1][t]!==e[0][t])throw new Error("First and last Position are not equivalent.")}return g({type:"Polygon",coordinates:t},e,r)}([n]):null}function A(t,e={}){let r=0,n=0,o=0;return P(t,(function(t){r+=t[0],n+=t[1],o++}),!0),y([r/o,n/o],e.properties)}function Y(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return[...t.geometry.coordinates];if("Point"===t.type)return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function j(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}function X(t,e={}){switch(j(t)){case"Point":return y(Y(t),e.properties);case"Polygon":var r=[];P(t,(function(t){r.push(t)}));var n,o,i,s,a,l,u,h,c=A(t,{properties:e.properties}),f=c.geometry.coordinates,p=0,g=0,m=0,d=r.map((function(t){return[t[0]-f[0],t[1]-f[1]]}));for(n=0;n<r.length-1;n++)s=(o=d[n])[0],l=o[1],a=(i=d[n+1])[0],m+=h=s*(u=i[1])-a*l,p+=(s+a)*h,g+=(l+u)*h;if(0===m)return c;var v=1/(.5*m*6);return y([f[0]+v*p,f[1]+v*g],e.properties);default:var x=O(t);return x?X(x,{properties:e.properties}):A(t,{properties:e.properties})}}class N{async execute(t){const[e,r]=await Promise.all([Promise.resolve().then(s.t.bind(s,414,23)),Promise.resolve().then(s.t.bind(s,770,23))]);await e.load();const n=t.geometri.spatialReference.wkid,o=e.project(t.geometri,{wkid:4326}),i=u(o.toJSON());let a={};if("Polygon"===i.type||"MultiPolygon"===i.type){const t=X(i);console.log("Center of Mass:",t);const o=c(t);console.log(o,"arcgisfraturf");const s=r.fromJSON(o.geometry);console.log(s,"geometryObject");const l=e.project(s,{wkid:n});console.log(l),a={error:!1,senterpunkt:l}}else a={error:!0,message:"Input geometry must be a polygon or multipolygon"};return{result:a}}}N.suite="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21",N.action="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21::Turf_testActivity";var B=N;function L(t,e,r={}){var n=Y(t),o=Y(e),i=E(o[1]-n[1]),s=E(o[0]-n[0]),a=E(n[1]),l=E(o[1]),u=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(l);return x(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),r.units)}function F(t,e={}){return function(t,e,r){var n=r,o=!1;return function(t,e){I(t,(function(t,r,n){var o=0;if(t.geometry){var i=t.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var s,a=0,l=0,u=0;return!1!==P(t,(function(i,h,c,f,p){if(void 0===s||r>a||f>l||p>u)return s=i,a=r,l=f,u=p,void(o=0);var g=m([s,i],t.properties);if(!1===e(g,r,n,p,o))return!1;o++,s=i}))&&void 0}}}))}(t,(function(t,i,s,a,l){n=!1===o&&void 0===r?t:e(n,t,i,s,a,l),o=!0})),n}(t,((t,r)=>{const n=r.geometry.coordinates;return t+L(n[0],n[1],e)}),0)}function C(t,e,r={}){if(!0===r.final)return function(t,e){let r=C(e,t);return r=(r+180)%360,r}(t,e);const n=Y(t),o=Y(e),i=E(n[0]),s=E(o[0]),a=E(n[1]),l=E(o[1]),u=Math.sin(s-i)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(s-i);return w(Math.atan2(u,h))}function G(t,e,r,n={}){const o=Y(t),i=E(o[0]),s=E(o[1]),a=E(r),l=b(e,n.units),u=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return y([w(i+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(u))),w(u)],n.properties)}class T{async execute(t){const[e,r]=await Promise.all([Promise.resolve().then(s.t.bind(s,414,23)),Promise.resolve().then(s.t.bind(s,770,23))]);await e.load();const n=t.geometri.spatialReference.wkid;let o={};const i=e.project(t.geometri,{wkid:4326});console.log(i,"geometri4326");const a=u(i.toJSON());console.log(a,"geometriTurf");const l=F(a,{units:"meters"});if(console.log(l,"totalLength"),t.avstand>l)console.log("Avstand er større enn linjens lengde"),o={error:!0,message:"Avstand er større enn linjens lengde"};else if("LineString"!==a.type)console.log("Input geometri må være en linje"),o={error:!0,message:"Input geometri må være en linje"};else{console.log("Alt er ok");const i=[];console.log(l,"totalLength"),console.log(t.avstand,"inputs.avstand");for(let e=0+t.avstand;e<l;e+=t.avstand)i.push(e);const s=i.map((t=>{const o=function(t,e,r={}){var n;const o=("Feature"===(n=t).type?n.geometry:n).coordinates;let i=0;for(let t=0;t<o.length&&!(e>=i&&t===o.length-1);t++){if(i>=e){const n=e-i;if(n){const e=C(o[t],o[t-1])-180;return G(o[t],n,e,r)}return y(o[t])}i+=L(o[t],o[t+1],r)}return y(o[o.length-1])}(a,t,{units:"meters"}),i=c(o),s=r.fromJSON(i.geometry);return e.project(s,{wkid:n})}));console.log("geometri",t.geometri);const u=t.geometri.getPoint(0,0),h=t.geometri.getPoint(0,t.geometri.paths[0].length-1);s.unshift(u),s.push(h),console.log(s,"punkt_array"),o={error:!1,punkter:s}}return{result:o}}}T.suite="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21",T.action="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21::PunktLangsLinjeActivity";var q=T;function J(t){const e={type:"Feature"};return Object.keys(t).forEach((r=>{switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}})),e.properties=z(t.properties),null==t.geometry?e.geometry=null:e.geometry=$(t.geometry),e}function z(t){const e={};return t?(Object.keys(t).forEach((r=>{const n=t[r];"object"==typeof n?null===n?e[r]=null:Array.isArray(n)?e[r]=n.map((t=>t)):e[r]=z(n):e[r]=n})),e):e}function $(t){const e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((t=>$(t))),e):(e.coordinates=D(t.coordinates),e)}function D(t){const e=t;return"object"!=typeof e[0]?e.slice():e.map((t=>D(t)))}function U(t,e={}){if(null!=t.bbox&&!0!==e.recompute)return t.bbox;const r=[1/0,1/0,-1/0,-1/0];return P(t,(t=>{r[0]>t[0]&&(r[0]=t[0]),r[1]>t[1]&&(r[1]=t[1]),r[2]<t[0]&&(r[2]=t[0]),r[3]<t[1]&&(r[3]=t[1])})),r}function Z(t,e){const r=E(t[1]),n=E(e[1]);let o=E(e[0]-t[0]);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);const i=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(w(Math.atan2(o,i))+360)%360}function V(t,e,r){if(!_(r=r||{}))throw new Error("options is invalid");const n=r.origin||"centroid",o=r.mutate||!1;if(!t)throw new Error("geojson required");if("number"!=typeof e||e<=0)throw new Error("invalid factor");const i=Array.isArray(n)||"object"==typeof n;return!0!==o&&(t=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return J(t);case"FeatureCollection":return function(t){const e={type:"FeatureCollection"};return Object.keys(t).forEach((r=>{switch(r){case"type":case"features":return;default:e[r]=t[r]}})),e.features=t.features.map((t=>J(t))),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return $(t);default:throw new Error("unknown GeoJSON type")}}(t)),"FeatureCollection"!==t.type||i?K(t,e,n):(k(t,(function(r,o){t.features[o]=K(r,e,n)})),t)}function K(t,e,r){const n="Point"===j(t),o=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return Y(e);const r=t.bbox?t.bbox:U(t,{recompute:!0}),n=r[0],o=r[1],i=r[2],s=r[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return y([n,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return y([i,o]);case"nw":case"northwest":case"westnorth":case"topleft":return y([n,s]);case"ne":case"northeast":case"eastnorth":case"topright":return y([i,s]);case"center":return function(t,e={}){const r=U(t);return y([(r[0]+r[2])/2,(r[1]+r[3])/2],e.properties,e)}(t);case void 0:case null:case"centroid":return A(t);default:throw new Error("invalid origin")}}(t,r);return 1===e||n||(P(t,(function(t){const r=function(t,e,r={}){const n=Y(t),o=Y(e);o[0]+=o[0]-n[0]>180?-360:n[0]-o[0]>180?360:0;const i=function(t,e,r){const n=r=void 0===r?f:Number(r),o=t[1]*Math.PI/180,i=e[1]*Math.PI/180,s=i-o;let a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);const l=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),u=Math.abs(l)>1e-11?s/l:Math.cos(o);return Math.sqrt(s*s+u*u*a*a)*n}(n,o);return M(i,"meters",r.units)}(o,t),n=function(t,e,r={}){let n;return n=r.final?Z(Y(e),Y(t)):Z(Y(t),Y(e)),n>180?-(360-n):n}(o,t),i=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(function(t,e,r,n={}){const o=e<0;let i=M(Math.abs(e),n.units,"meters");o&&(i=-Math.abs(i));const s=Y(t),a=function(t,e,r,n){const o=e/(n=void 0===n?f:Number(n)),i=t[0]*Math.PI/180,s=E(t[1]),a=E(r),l=o*Math.cos(a);let u=s+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);const h=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),c=Math.abs(h)>1e-11?l/h:Math.cos(s);return[(180*(i+o*Math.sin(a)/c)/Math.PI+540)%360-180,180*u/Math.PI]}(s,i,r);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,y(a,n.properties)}(o,r*e,n));t[0]=i[0],t[1]=i[1],3===t.length&&(t[2]*=e)})),delete t.bbox),t}class Q{async execute(t){const[e,r]=await Promise.all([Promise.resolve().then(s.t.bind(s,414,23)),Promise.resolve().then(s.t.bind(s,770,23))]);await e.load();const n=t.geometri.spatialReference.wkid,o=e.project(t.geometri,{wkid:4326});console.log(o,"geometri4326");const i=u(o.toJSON());console.log(i,"geometriTurf");let a={};{const o=V(i,t.avstand);console.log("Center of Mass:",o);const s=c(o);console.log(s,"arcgisfraturf");const l=r.fromJSON(s);console.log(l,"geometryObject");const u=e.project(l,{wkid:n});console.log(u),a={error:!1,skalert:u}}return{result:a}}}Q.suite="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21",Q.action="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21::SkalerGeometriActivity";var W=Q;function H(t,e,r,n){if(!_(n=n||{}))throw new Error("options is invalid");var o,i=[];if("Feature"===t.type)o=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");o=t.coordinates}for(var s,a,l,u=o.length,h=0,c=0;c<o.length&&!(e>=h&&c===o.length-1);c++){if(h>e&&0===i.length){if(!(s=e-h))return i.push(o[c]),m(i);a=C(o[c],o[c-1])-180,l=G(o[c],s,a,n),i.push(l.geometry.coordinates)}if(h>=r)return(s=r-h)?(a=C(o[c],o[c-1])-180,l=G(o[c],s,a,n),i.push(l.geometry.coordinates),m(i)):(i.push(o[c]),m(i));if(h>=e&&i.push(o[c]),c===o.length-1)return m(i);h+=L(o[c],o[c+1],n)}if(h<e&&o.length===u)throw new Error("Start position is beyond line");var f=o[o.length-1];return m([f,f])}class tt{async execute(t){const[e,r]=await Promise.all([Promise.resolve().then(s.t.bind(s,414,23)),Promise.resolve().then(s.t.bind(s,770,23))]);await e.load();const n=t.geometri.spatialReference.wkid,o=e.project(t.geometri,{wkid:4326});console.log(o,"geometri4326");const i=u(o.toJSON());console.log(i,"geometriTurf");let a={};if("LineString"===i.type){const o=function(t,e,r){if(!_(r=r||{}))throw new Error("options is invalid");var n=r.units,o=r.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var i=[];return I(t,(function(t){o&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,r,n){var o=F(t,{units:r});if(o<=e)return n(t);var i=o/e;Number.isInteger(i)||(i=Math.floor(i)+1);for(var s=0;s<i;s++)n(H(t,e*s,e*(s+1),{units:r}))}(t,e,n,(function(t){i.push(t)}))})),d(i)}(i,t.avstand,{units:"meters"}),s=c(o);if(console.log(s,"arcgisfraturf"),Array.isArray(s)&&s.length>1){const t=s.map((t=>r.fromJSON(t.geometry)));console.log(t,"geometries")}const l=s.map((o=>(r.fromJSON(o.geometry),e.project(t.geometri,{wkid:n}))));console.log(l),a={error:!1,linjebiter:l}}else a={error:!0,message:"Input geometry must be a polyline"};return{result:a}}}tt.suite="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21",tt.action="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21::LinjeBiterActivity";var et=tt;class rt{async execute(t){let e={};return await navigator.clipboard.writeText(t.tekst).then((()=>{console.log("Teksten er kopiert til utklippstavla"),e={success:!0,message:"Teksten er kopiert til utklippstavla"}})).catch((t=>{e={success:!1,message:"Kunne ikke kopiere teksten til utklippstavla",error:t}})),{result:e}}}rt.suite="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21",rt.action="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21::Kopier_tekstActivity";var nt=rt;function ot(t){if(!t)throw new Error("geojson is required");var e=[];return I(t,(function(t){e.push(t)})),d(e)}var it=s(4);class st{async execute(t){const[e,r]=await Promise.all([Promise.resolve().then(s.t.bind(s,414,23)),Promise.resolve().then(s.t.bind(s,770,23))]);await e.load(),console.log(t.geometri);let n="";n=void 0!==t.geometri?"geometri":void 0!==t.features?"features":"none";let o=0,i={},a=[];switch(n){case"geometri":o=t.geometri[0].spatialReference.wkid,a=function(t){const r=t.map((t=>{const r=e.project(t,{wkid:4326});return g(u(r.toJSON()))}));return r}(t.geometri);break;case"features":o=t.features[0].geometry.spatialReference.wkid,a=function(t){const r=t.map((t=>{const r=e.project(t.geometry,{wkid:4326});return t.geometry=r,u(t.toJSON())}));return r}(t.features);break;default:o=0}const l={};{const t=function(t,e={}){if(!_(e=e||{}))throw new Error("options is invalid");const{propertyName:r}=e;!function(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(const n of t.features){if(!n||"Feature"!==n.type||!n.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+n.geometry.type)}}(t,"Polygon","dissolve");const n=[];if(!r)return ot(v(it.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));{const e={};k(t,(function(t){t.properties&&(Object.prototype.hasOwnProperty.call(e,t.properties[r])||(e[t.properties[r]]=[]),e[t.properties[r]].push(t))}));const o=Object.keys(e);for(let t=0;t<o.length;t++){const i=v(it.union.apply(null,e[o[t]].map((function(t){return t.geometry.coordinates}))));i&&i.properties&&(i.properties[r]=o[t],n.push(i))}}return ot(d(n))}(d(a),l),n=c(t);Array.isArray(n)&&n.length>1&&n.map((t=>r.fromJSON(t.geometry)));const s=n.map((t=>{const n=r.fromJSON(t.geometry);return e.project(n,{wkid:o})}));console.log(s),i={error:!1,flater:s}}return{result:i}}}st.suite="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21",st.action="uuid:fc40ad0a-ad84-468d-a98f-53d3e1fcab21::DissolveActivity";var at=st;let lt;async function ut(){return lt||(lt=Promise.resolve(t),lt)}}(),a}()}));